{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/settings/settings_tabs_functionality.js","webpack:///./src/components/modal-dialog/canvas_size.js","webpack:///./src/components/frame-list/frames.js","webpack:///./src/components/tools/pen.js","webpack:///./src/components/tools/tools_functionality.js","webpack:///./src/components/tools/eraser.js","webpack:///./src/components/tools/stroke.js","webpack:///./src/components/tools/paint_bucket.js","webpack:///./src/components/frame-list/frames_functionality.js","webpack:///./src/components/modal-dialog/authorization_functionality.js","webpack:///./src/components/modal-dialog/authorization.js","webpack:///./src/components/modal-dialog/modal_window.js","webpack:///./src/components/loading/local_storage_functionality.js","webpack:///./src/components/loading/local_storage_set.js","webpack:///./src/components/loading/local_storage_get.js","webpack:///./src/screens/export/export_functionality.js","webpack:///./src/screens/export/PNGexport.js","webpack:///./src/screens/export/GIFexport.js","webpack:///./src/screens/preview/animation_preview_functionality.js","webpack:///./src/screens/preview/animation_preview.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","settingsTabs","Array","from","document","querySelectorAll","settingsContents","settingsTabsContainer","querySelector","settingsContentContainer","formatTabs","formatTabsContents","forEach","el","addEventListener","classList","contains","j","length","remove","add","some","elem","CanvasSize","this","pixelSize","textContent","canvasSizeWidth","canvasSizeHeight","range","data","Frames","canvas","ctx","getContext","framesContainer","frames","newFrame","cloneNode","append","clearRect","width","height","event","target","closest","prevSibling","previousElementSibling","putFrameDataOnCanvas","stopPropagation","targetNextSibling","nextElementSibling","targetCanvas","children","duplicate","insertBefore","duplicateCanvas","duplicateCanvasCtx","style","visibility","drawImage","canvasFrame","ctxFrame","imageSmoothingEnabled","frameButtons","frameChildren","type","dragged","preventDefault","stopImmediatePropagation","Number","replacedNode","replaceChild","k","flag","lastX","lastY","canvasSize","framesFunctionality","color","chooseSize","activeSizeValue","getAttribute","fillStyle","x1","y1","field","Math","floor","x2","offsetX","y2","offsetY","fillRect","deltaX","deltaY","sightX","sightY","abs","b","round","primaryColor","secondaryColor","which","drawBrasenham","putCanvasDataOnFrame","penFunctionality","eraserFunctionality","strokeFunctionality","canvasEvent","storedLines","originalImage","getImageData","putImageData","strokeStyle","lineJoin","lineCap","beginPath","moveTo","lineTo","stroke","paintBucketFunctionality","clickedColor","imageData","hexName","hex","replace","parseInt","substring","clickedColorRGB","avgColor","FastAverageColor","getColor","stack","viewed","pixel","canvasColor","arrRgb","hexToRgb","rgb","rgba","pop","push","floodFill","penSizes","tools","revertColors","drawingToolsFun","events","removeEventListener","handleEvent","toolsListeners","addNewFrameButton","body","element","deleteFrame","duplicateFrame","ev","addFrame","signInButton","autorize","firebase","auth","onAuthStateChanged","user","arr","displayName","split","app","provider","GoogleAuthProvider","signInWithRedirect","googleSignIn","filter","modalWindow","modalWindowExit","modalWindowDisplay","modalWindowItems","modalWindowItemsHTML","map","join","pen","paintBucket","eraser","keySimbolsString","keyCodesArray","showWindow","state","display","changeShortcut","window","keyCode","code","indexOf","simbolIndex","simbolKey","index","once","activeFrame","clickEvent","Event","dispatchEvent","localStorageSet","localStorage","setItem","toDataURL","animationSpeed","JSON","stringify","localStorageGet","getItem","activeSizeIndex","framesLength","frameStructure","insertAdjacentHTML","canvasFrameImg","img","Image","src","onload","canvasImg","animationSpeedOutput","parse","savePenUnit","saveActiveTool","savePrimaryColor","saveSecondaryColor","saveFramesLength","saveActiveFrame","saveCanvasData","saveCanvasSize","saveAnimationSpeed","saveKeyboardShorts","getPenUnit","getActiveTool","getPrimaryColor","getSecondaryColor","getFramesLength","getActiveFrame","getCanvasData","getCanvasSize","getAnimationSpeed","getKeyboardShorts","activeTool","pngExport","resolutionBoxLeft","spritesheetCols","spritesheetRows","spritesheetOutputFrames","spritesheetOutputColRow","a","createElement","href","download","click","gifExport","gifRepeat","loop","gifSpeed","checked","encoder","GIFEncoder","params","$","extend","f","toArray","filename","repeat","delay","dispose","transparent","setRepeat","setDelay","setDispose","setTransparent","start","frame","finish","resolutionInputs","downloadGIF","singleFramePNG","scaleOutput","toFixed","spritesheetFileInfo","max","ceil","singleFrameToPNG","downloadGif","animation","frameIndex","animatedCanvas","animatedCtx","frameImg","setTimeout","requestAnimationFrame","Infinity","noSpeed","fullscreenEnabled","webkitFullscreenEnabled","requestFullscreen","webkitRequestFullscreen","popupPreview","animationSpeedText","rightSectionTools","animationButtonsContainer","fullScreenMode"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,gDClFrD,MAAMC,EAAeC,MAAMC,KAAKC,SAASC,iBAAiB,kBACpDC,EAAmBJ,MAAMC,KAAKC,SAASC,iBAAiB,sBACxDE,EAAwBH,SAASI,cAAc,gCAC/CC,EAA2BL,SAASI,cAAc,mCAClDE,EAAaR,MAAMC,KAAKC,SAASC,iBAAiB,gBAClDM,EAAqBT,MAAMC,KAAKC,SAASC,iBAAiB,wBAEhEJ,EAAaW,QAAQ,CAACC,EAAI5C,IAAM4C,EAAGC,iBAAiB,QAAS,KAC3D,IAA4C,IAAxCD,EAAGE,UAAUC,SAAS,cAAyB,CACjD,IAAK,IAAIC,EAAI,EAAGA,EAAIhB,EAAaiB,OAAQD,GAAK,EACxChB,EAAagB,GAAGF,UAAUC,SAAS,gBACrCf,EAAagB,GAAGF,UAAUI,OAAO,cACjCb,EAAiBW,GAAGF,UAAUI,OAAO,oBAGzCN,EAAGE,UAAUK,IAAI,cACjBd,EAAiBrC,GAAG8C,UAAUK,IAAI,wBACe,IAAxCP,EAAGE,UAAUC,SAAS,gBAC/BH,EAAGE,UAAUI,OAAO,cACpBb,EAAiBrC,GAAG8C,UAAUI,OAAO,oBAEnClB,EAAaoB,KAAMC,GAASA,EAAKP,UAAUC,SAAS,gBACtDT,EAAsBQ,UAAUK,IAAI,YACpCX,EAAyBM,UAAUK,IAAI,aAEvCb,EAAsBQ,UAAUI,OAAO,YACvCV,EAAyBM,UAAUI,OAAO,eAI9CT,EAAWE,QAAQ,CAACC,EAAI5C,IAAM4C,EAAGC,iBAAiB,QAAS,KACzD,IAAmD,IAA/CD,EAAGE,UAAUC,SAAS,qBAAgC,CACxD,IAAK,IAAIC,EAAI,EAAGA,EAAIP,EAAWQ,OAAQD,GAAK,EACtCP,EAAWO,GAAGF,UAAUC,SAAS,uBACnCN,EAAWO,GAAGF,UAAUI,OAAO,qBAC/BR,EAAmBM,GAAGF,UAAUI,OAAO,oBAG3CN,EAAGE,UAAUK,IAAI,qBACjBT,EAAmB1C,GAAG8C,UAAUK,IAAI,wB,oCCtCzB,MAAMG,EACnB,cACEC,KAAKC,UAAY,KAGnB,oBAGE,OAFwBrB,SAASI,cAAc,wBAC/BkB,YAAcF,KAAKC,UAC5BD,KAAKC,UAGd,aACE,MAAME,EAAkBvB,SAASI,cAAc,wBACzCoB,EAAmBxB,SAASI,cAAc,yBAC1CqB,EAAQzB,SAASI,cAAc,eACrC,MAAoB,MAAhBqB,EAAM3C,OACRsC,KAAKC,UAAY,KACjBI,EAAMC,KAAON,KAAKC,UAClBE,EAAgBzC,MAAQ,GAAG2C,EAAMC,OACjCF,EAAiB1C,MAAQ,GAAG2C,EAAMC,OAC3BN,KAAKC,WAEM,MAAhBI,EAAM3C,OACRsC,KAAKC,UAAY,KACjBI,EAAMC,KAAON,KAAKC,UAClBE,EAAgBzC,MAAQ,GAAG2C,EAAMC,OACjCF,EAAiB1C,MAAQ,GAAG2C,EAAMC,OAC3BN,KAAKC,WAEM,MAAhBI,EAAM3C,OACRsC,KAAKC,UAAY,MACjBI,EAAMC,KAAON,KAAKC,UAClBE,EAAgBzC,MAAQ,GAAG2C,EAAMC,OACjCF,EAAiB1C,MAAQ,GAAG2C,EAAMC,OAC3BN,KAAKC,gBALd,GC9BW,MAAMM,EAEnB,WACE,MAAMC,EAAS5B,SAASI,cAAc,WAChCyB,EAAMD,EAAOE,WAAW,MACxBC,EAAkB/B,SAASI,cAAc,qBACzC4B,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WACpD,IAAK,IAAIpC,EAAI,EAAGA,EAAImE,EAAOlB,OAAQjD,GAAK,EAClCmE,EAAOnE,GAAG8C,UAAUC,SAAS,iBAC/BoB,EAAOnE,GAAG8C,UAAUI,OAAO,gBAG/B,MAAMkB,EAAWD,EAAO,GAAGE,WAAU,GACrCH,EAAgBI,OAAOF,GACvBA,EAAStB,UAAUK,IAAI,gBACvBa,EAAIO,UAAU,EAAG,EAAGR,EAAOS,MAAOT,EAAOU,QAG3C,YAAYC,GACKvC,SAASI,cAAc,WACnB0B,WAAW,MAD9B,MAEME,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WAC9CuC,EAASD,EAAMC,OAAOC,QAAQ,OAC9BC,EAAcF,EAAOG,uBACvBH,EAAO7B,UAAUC,SAAS,iBAAmB8B,GAC/CA,EAAY/B,UAAUK,IAAI,gBAC1BW,EAAOlC,UAAUmD,wBACRJ,EAAO7B,UAAUC,SAAS,iBAAoB4B,IAAWR,EAAO,KACzEA,EAAO,GAAGrB,UAAUI,OAAO,gBAC3BiB,EAAO,GAAGrB,UAAUK,IAAI,gBACxBW,EAAOlC,UAAUmD,wBAEnBJ,EAAOzB,SACPwB,EAAMM,kBAGR,eAAeN,GACEvC,SAASI,cAAc,WACnB0B,WAAW,MAD9B,MAEMC,EAAkB/B,SAASI,cAAc,qBACzC4B,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WACpD,IAAK,IAAIpC,EAAI,EAAGA,EAAImE,EAAOlB,OAAQjD,GAAK,EAClCmE,EAAOnE,GAAG8C,UAAUC,SAAS,iBAC/BoB,EAAOnE,GAAG8C,UAAUI,OAAO,gBAG/B,MAAMyB,EAASD,EAAMC,OAAOC,QAAQ,OAC9BK,EAAoBN,EAAOO,mBAC3BC,EAAeR,EAAOS,SAAS,GAE/BC,GADkBF,EAAalB,WAAW,MAC9BU,EAAON,WAAU,IAEnCH,EAAgBoB,aAAaD,EAAWJ,GACxCI,EAAUvC,UAAUK,IAAI,gBACxB,MAAMoC,EAAkBF,EAAUD,SAAS,GACrCI,EAAqBD,EAAgBtB,WAAW,MAC7B,CAACoB,EAAU9C,cAAc,wBAAyB8C,EAAU9C,cAAc,sBAAuB8C,EAAU9C,cAAc,4BACjII,QAASC,IACRA,EACR6C,MAAMC,WAAa,WAG7BF,EAAmBG,UAAUR,EAAc,EAAG,EAAGA,EAAaX,MAAOW,EAAaV,OAAQ,EAAG,EAAGc,EAAgBf,MAAOe,EAAgBd,QACvIC,EAAMM,kBAGR,uBACE,MAAMjB,EAAS5B,SAASI,cAAc,WAGhCqD,GAFM7B,EAAOE,WAAW,MACV9B,SAASI,cAAc,iBACX6C,SAAS,IACnCS,EAAWD,EAAY3B,WAAW,MACxC4B,EAAStB,UAAU,EAAG,EAAGqB,EAAYpB,MAAOoB,EAAYnB,QACxDoB,EAASC,uBAAwB,EACjCD,EAASF,UAAU5B,EAAQ,EAAG,EAAGA,EAAOS,MAAOT,EAAOU,OAAQ,EAAG,EAAGmB,EAAYpB,MAAOoB,EAAYnB,QAGrG,uBACE,MAAMV,EAAS5B,SAASI,cAAc,WAChCyB,EAAMD,EAAOE,WAAW,MAExB2B,EADczD,SAASI,cAAc,iBACX6C,SAAS,GACxBQ,EAAY3B,WAAW,MACxCD,EAAIO,UAAU,EAAG,EAAGR,EAAOS,MAAOT,EAAOU,QACzCT,EAAI8B,uBAAwB,EAC5B9B,EAAI2B,UAAUC,EAAa,EAAG,EAAGA,EAAYpB,MAAOoB,EAAYnB,OAAQ,EAAG,EAAGV,EAAOS,MAAOT,EAAOU,QAGrG,YAAYC,GACKvC,SAASI,cAAc,WACnB0B,WAAW,MAD9B,MAEME,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WAEpD,IAAK,IAAIpC,EAAI,EAAGA,EAAImE,EAAOlB,OAAQjD,GAAK,EAAG,CACzC,MAAM2E,EAASD,EAAMC,OAAOC,QAAQ,OAC9BmB,EAAe,CAACpB,EAAOpC,cAAc,wBAAyBoC,EAAOpC,cAAc,sBAAuBoC,EAAOpC,cAAc,4BAC/HyD,EAAgB,CAACrB,EAAOS,SAAS,GAAIT,EAAOS,SAAS,IACrDlB,EAAkB/B,SAASI,cAAc,qBACzBJ,SAASI,cAAc,wBAE7C,OAAQmC,EAAMuB,MACZ,IAAK,YACHF,EAAapD,QAASC,IACpB,GAAI+B,IAAWT,EAAgBkB,SAAS,IAA0C,IAApClB,EAAgBkB,SAASnC,OACrE8C,EAAa,GAAGN,MAAMC,WAAa,cAC9B,CACW9C,EACR6C,MAAMC,WAAa,aAG/B,MAEF,IAAK,WACHK,EAAapD,QAASC,IACJA,EACR6C,MAAMC,WAAa,WAE7B,MAEF,IAAK,YACHnC,KAAK2C,QAAUvB,EACf,MAEF,IAAK,YAIH,GAHAD,EAAMyB,iBACNzB,EAAM0B,2BAEFC,OAAO9C,KAAK2C,QAAQd,SAAS,GAAG3B,aAAe4C,OAAO1B,EAAOS,SAAS,GAAG3B,aAAc,CACzF,MAAM6C,EAAepC,EAAgBqC,aAAahD,KAAK2C,QAASvB,GAEhE,YADAT,EAAgBoB,aAAagB,EAAc/C,KAAK2C,QAAQhB,oBAI1D,GAAImB,OAAO9C,KAAK2C,QAAQd,SAAS,GAAG3B,aAAe4C,OAAO1B,EAAOS,SAAS,GAAG3B,aAAc,CACzF,MAAM6C,EAAepC,EAAgBqC,aAAahD,KAAK2C,QAASvB,GAEhE,YADAT,EAAgBoB,aAAagB,EAAc/C,KAAK2C,SAGlD,MAEF,IAAK,WACHxB,EAAMyB,iBACNH,EAAcrD,QAASC,IACLA,EACR6C,MAAMC,WAAa,WAE7BK,EAAapD,QAASC,IACJA,EACR6C,MAAMC,WAAa,WAE7Bf,EAAO7B,UAAUK,IAAI,QACrB,MAEF,IAAK,YACHuB,EAAMyB,iBACN,MAEF,IAAK,UACH,IAAK,IAAIK,EAAI,EAAGA,EAAIrC,EAAOlB,OAAQuD,GAAK,EAClCrC,EAAOqC,GAAG1D,UAAUC,SAAS,iBAC/BoB,EAAOqC,GAAG1D,UAAUI,OAAO,gBAG/BK,KAAK2C,QAAQpD,UAAUK,IAAI,gBAC3BI,KAAKwB,uBACLJ,EAAO7B,UAAUI,OAAO,QACxB8C,EAAcrD,QAASC,IACLA,EACR6C,MAAMC,WAAa,YAE7B,MAEF,IAAK,OAGH,GAFAhB,EAAM0B,2BAEFC,OAAO9C,KAAK2C,QAAQd,SAAS,GAAG3B,aAAe4C,OAAO1B,EAAOS,SAAS,GAAG3B,aAAc,CACzF,MAAM6C,EAAepC,EAAgBqC,aAAahD,KAAK2C,QAASvB,GAChET,EAAgBoB,aAAagB,EAAc/C,KAAK2C,QAAQhB,oBACxDP,EAAO7B,UAAUI,OAAO,QACxB8C,EAAcrD,QAASC,IACLA,EACR6C,MAAMC,WAAa,YAE7B,IAAK,IAAI1C,EAAI,EAAGA,EAAImB,EAAOlB,OAAQD,GAAK,EAClCmB,EAAOnB,GAAGF,UAAUC,SAAS,iBAC/BoB,EAAOnB,GAAGF,UAAUI,OAAO,gBAK/B,OAFAK,KAAK2C,QAAQpD,UAAUK,IAAI,qBAC3BI,KAAKwB,uBAGP,GAAIsB,OAAO9C,KAAK2C,QAAQd,SAAS,GAAG3B,aAAe4C,OAAO1B,EAAOS,SAAS,GAAG3B,aAAc,CACzF,MAAM6C,EAAepC,EAAgBqC,aAAahD,KAAK2C,QAASvB,GAChET,EAAgBoB,aAAagB,EAAc/C,KAAK2C,SAChDvB,EAAO7B,UAAUI,OAAO,QACxB8C,EAAcrD,QAASC,IACLA,EACR6C,MAAMC,WAAa,YAE7B,IAAK,IAAI1C,EAAI,EAAGA,EAAImB,EAAOlB,OAAQD,GAAK,EAClCmB,EAAOnB,GAAGF,UAAUC,SAAS,iBAC/BoB,EAAOnB,GAAGF,UAAUI,OAAO,gBAK/B,OAFAK,KAAK2C,QAAQpD,UAAUK,IAAI,qBAC3BI,KAAKwB,2BC1MF,MAAM,EACnB,cACExB,KAAKkD,KAAO,KACZlD,KAAKmD,MAAQ,KACbnD,KAAKoD,MAAQ,KACbpD,KAAKqD,WAAa,IAAItD,EACtBC,KAAKsD,oBAAsB,IAAI/C,EAGjC,cAAcgD,GACZ,MACM9C,EADS7B,SAASI,cAAc,WACnB0B,WAAW,MACxBL,EAAQzB,SAASI,cAAc,eACrCgB,KAAKqD,WAAWG,aAChB,MACMC,EADa7E,SAASI,cAAc,gBACP0E,aAAa,SAEhD,GADAjD,EAAIkD,UAAYJ,GACXvD,KAAKkD,KAAM,OAChB,IAAIU,EAAK5D,KAAKmD,MACVU,EAAK7D,KAAKoD,MACd,MAAMU,EAAS,IAAMzD,EAAMC,KAC3BsD,EAAKG,KAAKC,MAAMhE,KAAKmD,MAAQW,GAC7BD,EAAKE,KAAKC,MAAMhE,KAAKoD,MAAQU,GAC7B,IAAIG,EAAK9C,MAAM+C,QACXC,EAAKhD,MAAMiD,QAIf,GAHAH,EAAKF,KAAKC,MAAMC,EAAKH,GACrBK,EAAKJ,KAAKC,MAAMG,EAAKL,GAEjBF,IAAOK,GAAMJ,IAAOM,EAEtB,YADA1D,EAAI4D,SAAST,EAAKE,EAAOD,EAAKC,EAAOA,EAAQL,EAAiBK,EAAQL,GAGxE,MAAMa,EAASL,EAAKL,EACdW,EAASJ,EAAKN,EACdW,EAAUF,EAAS,GAAM,EAAI,EAC7BG,EAAUF,EAAS,GAAM,EAAI,EAEnC,GAAIR,KAAKW,IAAIH,GAAUR,KAAKW,IAAIJ,GAAS,CACvC,MAAMK,EAAId,EAAMU,EAASD,EAAUV,EAEnC,KAAOA,IAAOK,GACZxD,EAAI4D,SAAST,EAAKE,EAAOC,KAAKa,MAAOL,EAASD,EAAUV,EAAKe,GAAKb,EAAOA,EAAQL,EAAiBK,EAAQL,GAC1GG,GAAMY,OAEH,GAAIT,KAAKW,IAAIH,GAAUR,KAAKW,IAAIJ,GAAS,CAC9C,MAAMK,EAAIf,EAAMU,EAASC,EAAUV,EACnC,KAAOA,IAAOM,GACZ1D,EAAI4D,SAASN,KAAKa,MAAON,EAASC,EAAUV,EAAKc,GAAKb,EAAOD,EAAKC,EAAOA,EAAQL,EAAiBK,EAAQL,GAC1GI,GAAMY,EAGVhE,EAAI4D,SAASJ,EAAKH,EAAOK,EAAKL,EAAOA,EAAQL,EAAiBK,EAAQL,GAGxE,YAAYtC,GACV,MAAM0D,EAAejG,SAASI,cAAc,yBACtC8F,EAAiBlG,SAASI,cAAc,2BAC9C,IAAIuE,EAAQ,KACZ,OAAQpC,EAAM4D,OACZ,KAAK,EACHxB,EAAQsB,EAAanH,MACrB,MAEF,KAAK,EAIL,QACE6F,EAAQuB,EAAepH,MAG3B,OAAQyD,EAAMuB,MACZ,IAAK,YACH1C,KAAKgF,cAAczB,IAClBvD,KAAKmD,MAAOnD,KAAKoD,OAAS,CAACjC,EAAM+C,QAAS/C,EAAMiD,SACjD,MAEF,IAAK,YACHpE,KAAKkD,MAAO,GACXlD,KAAKmD,MAAOnD,KAAKoD,OAAS,CAACjC,EAAM+C,QAAS/C,EAAMiD,SACjDpE,KAAKgF,cAAczB,GACnB,MAEF,IAAK,UACHvD,KAAKkD,MAAO,EACZlD,KAAKgF,cAAczB,GACnBvD,KAAKsD,oBAAoB2B,uBACzB,MAEF,IAAK,aACHjF,KAAKkD,MAAO,EACZlD,KAAKgF,cAAczB,KCxF3B,MAAM2B,EAAmB,IAAI,EACvBC,EAAsB,ICLb,cAAqB,EAClC,cAAc5B,GACZ,MACM9C,EADS7B,SAASI,cAAc,WACnB0B,WAAW,MACxBL,EAAQzB,SAASI,cAAc,eACrCgB,KAAKqD,WAAWG,aAChB,MACMC,EADa7E,SAASI,cAAc,gBACP0E,aAAa,SAEhD,GADAjD,EAAIkD,UAAYJ,GACXvD,KAAKkD,KAAM,OAChB,IAAIU,EAAK5D,KAAKmD,MACVU,EAAK7D,KAAKoD,MACd,MAAMU,EAAS,IAAMzD,EAAMC,KAC3BsD,EAAKG,KAAKC,MAAMhE,KAAKmD,MAAQW,GAC7BD,EAAKE,KAAKC,MAAMhE,KAAKoD,MAAQU,GAC7B,IAAIG,EAAK9C,MAAM+C,QACXC,EAAKhD,MAAMiD,QAIf,GAHAH,EAAKF,KAAKC,MAAMC,EAAKH,GACrBK,EAAKJ,KAAKC,MAAMG,EAAKL,GAEjBF,IAAOK,GAAMJ,IAAOM,EAEtB,YADA1D,EAAIO,UAAU4C,EAAKE,EAAOD,EAAKC,EAAOA,EAAQL,EAAiBK,EAAQL,GAGzE,MAAMa,EAASL,EAAKL,EACdW,EAASJ,EAAKN,EACdW,EAAUF,EAAS,GAAM,EAAI,EAC7BG,EAAUF,EAAS,GAAM,EAAI,EAEnC,GAAIR,KAAKW,IAAIH,GAAUR,KAAKW,IAAIJ,GAAS,CACvC,MAAMK,EAAId,EAAMU,EAASD,EAAUV,EAEnC,KAAOA,IAAOK,GACZxD,EAAIO,UAAU4C,EAAKE,EAAOC,KAAKa,MAAOL,EAASD,EAAUV,EAAKe,GAAKb,EAAOA,EAAQL,EAAiBK,EAAQL,GAC3GG,GAAMY,OAEH,GAAIT,KAAKW,IAAIH,GAAUR,KAAKW,IAAIJ,GAAS,CAC9C,MAAMK,EAAIf,EAAMU,EAASC,EAAUV,EACnC,KAAOA,IAAOM,GACZ1D,EAAIO,UAAU+C,KAAKa,MAAON,EAASC,EAAUV,EAAKc,GAAKb,EAAOD,EAAKC,EAAOA,EAAQL,EAAiBK,EAAQL,GAC3GI,GAAMY,EAGVhE,EAAIO,UAAUiD,EAAKH,EAAOK,EAAKL,EAAOA,EAAQL,EAAiBK,EAAQL,KDrCrE2B,EAAsB,IENb,MACb,cACEpF,KAAKmD,MAAQ,KACbnD,KAAKoD,MAAQ,KACbpD,KAAKqF,aAAc,EACnBrF,KAAKsF,YAAc,GACnBtF,KAAKuF,cAAgB,KACrBvF,KAAKuD,MAAQ,KACbvD,KAAKsD,oBAAsB,IAAI/C,EAGjC,YAAYY,GACV,MAAMX,EAAS5B,SAASI,cAAc,WAChCyB,EAAMD,EAAOE,WAAW,MACxBL,EAAQzB,SAASI,cAAc,eAC/B6F,EAAejG,SAASI,cAAc,yBACtC8F,EAAiBlG,SAASI,cAAc,2BAExCyE,EADa7E,SAASI,cAAc,gBACP0E,aAAa,SAEhD,OAAQvC,EAAMuB,MACZ,IAAK,YACH1C,KAAKuF,cAAgB9E,EAAI+E,aAAa,EAAG,EAAG,IAAK,KACjDxF,KAAKmD,MAAQhC,EAAM+C,QACnBlE,KAAKoD,MAAQjC,EAAMiD,QACnBpE,KAAKqF,aAAc,EACnB,MAEF,IAAK,YACH,IAAyB,IAArBrF,KAAKqF,YAAsB,CAC7B5E,EAAIO,UAAU,EAAG,EAAGR,EAAOS,MAAOT,EAAOU,QACzCT,EAAIgF,aAAazF,KAAKuF,cAAe,EAAG,GACxC9E,EAAIkD,UAAY3D,KAAKuD,MACrB9C,EAAIiF,YAAc,cAClBjF,EAAIkF,SAAW,SACflF,EAAImF,QAAU,SACd,IAAIhC,EAAK5D,KAAKmD,MACVU,EAAK7D,KAAKoD,MACd,MAAMU,EAAQ,IAAMzD,EAAMC,KAC1BsD,EAAKG,KAAKC,MAAMhE,KAAKmD,MAAQW,GAC7BD,EAAKE,KAAKC,MAAMhE,KAAKoD,MAAQU,GAC7B,IAAIG,EAAK9C,EAAM+C,QACXC,EAAKhD,EAAMiD,QAIf,GAHAH,EAAKF,KAAKC,MAAMC,EAAKH,GACrBK,EAAKJ,KAAKC,MAAMG,EAAKL,GAEjBF,IAAOK,GAAMJ,IAAOM,EAEtB,YADA1D,EAAI4D,SAAST,EAAKE,EAAOD,EAAKC,EAAOA,EAAQL,EAAiBK,EAAQL,GAGxE,MAAMa,EAASL,EAAKL,EACdW,EAASJ,EAAKN,EACdW,EAAUF,EAAS,GAAM,EAAI,EAC7BG,EAAUF,EAAS,GAAM,EAAI,EAEnC,GAAIR,KAAKW,IAAIH,GAAUR,KAAKW,IAAIJ,GAAS,CACvC,MAAMK,EAAId,EAAMU,EAASD,EAAUV,EAEnC,KAAOA,IAAOK,GACZxD,EAAI4D,SAAST,EAAKE,EAAOC,KAAKa,MAAOL,EAASD,EAAUV,EAAKe,GAAKb,EAAOA,EAAQL,EAAiBK,EAAQL,GAC1GG,GAAMY,OAEH,GAAIT,KAAKW,IAAIH,GAAUR,KAAKW,IAAIJ,GAAS,CAC9C,MAAMK,EAAIf,EAAMU,EAASC,EAAUV,EACnC,KAAOA,IAAOM,GACZ1D,EAAI4D,SAASN,KAAKa,MAAON,EAASC,EAAUV,EAAKc,GAAKb,EAAOD,EAAKC,EAAOA,EAAQL,EAAiBK,EAAQL,GAC1GI,GAAMY,EAGVhE,EAAI4D,SAASJ,EAAKH,EAAOK,EAAKL,EAAOA,EAAQL,EAAiBK,EAAQL,GACtEhD,EAAIoF,YACJpF,EAAIqF,OAAO9F,KAAKmD,MAAOnD,KAAKoD,OAC5B3C,EAAIsF,OAAO5E,EAAM+C,QAAS/C,EAAMiD,SAChC3D,EAAIuF,SAEN,MAEF,IAAK,UACHhG,KAAKqF,aAAc,EACnBrF,KAAKsD,oBAAoB2B,uBACzB,MAEF,IAAK,WACHjF,KAAKqF,aAAc,EAIvB,OAAQlE,EAAM4D,OACZ,KAAK,EACH/E,KAAKuD,MAAQsB,EAAanH,MAC1B,MAEF,KAAK,EAIL,QACEsC,KAAKuD,MAAQuB,EAAepH,SF1F9BuI,EAA2B,IGPlB,MACb,cACEjG,KAAKuD,MAAQ,KACbvD,KAAKkG,aAAe,KACpBlG,KAAKmG,UAAY,KACjBnG,KAAKsD,oBAAsB,IAAI/C,EAGjC,SAAS6F,GACP,MAAMC,EAAMD,EAAQE,QAAQ,IAAK,IAIjC,MAAO,CAHGC,SAASF,EAAIG,UAAU,EAAG,GAAI,IAC9BD,SAASF,EAAIG,UAAU,EAAG,GAAI,IAC9BD,SAASF,EAAIG,UAAU,EAAG,GAAI,KAI1C,UAAUjD,GACR,MAAM/C,EAAS5B,SAASI,cAAc,WAChCyB,EAAMD,EAAOE,WAAW,MAC9BV,KAAKmG,UAAY1F,EAAI+E,aAAa,EAAG,EAAG,IAAK,KAC7CxF,KAAKkG,aAAe,QAClBlG,KAAKmG,UAAU7F,KAAqB,EAAhBa,MAAMiD,QAAc,IAAsB,EAAhBjD,MAAM+C,YAClDlE,KAAKmG,UAAU7F,KAAqB,EAAhBa,MAAMiD,QAAc,IAAsB,EAAhBjD,MAAM+C,QAAc,MACpElE,KAAKmG,UAAU7F,KAAqB,EAAhBa,MAAMiD,QAAc,IAAsB,EAAhBjD,MAAM+C,QAAc,QAGpElE,KAAKyG,gBAAkB,OACrBzG,KAAKmG,UAAU7F,KAAqB,EAAhBa,MAAMiD,QAAc,IAAsB,EAAhBjD,MAAM+C,YAClDlE,KAAKmG,UAAU7F,KAAqB,EAAhBa,MAAMiD,QAAc,IAAsB,EAAhBjD,MAAM+C,QAAc,MACpElE,KAAKmG,UAAU7F,KAAqB,EAAhBa,MAAMiD,QAAc,IAAsB,EAAhBjD,MAAM+C,QAAc,MAGpE,MACMwC,GADM,IAAIC,kBACKC,SAASpG,GACxBqG,EAAQ,CAAC,CAAC1F,MAAMiD,QAASjD,MAAM+C,UAC/B4C,EAAS,GACf,IAAIC,EACAC,EACAtH,EAAS,EACb,MAAMuH,EAASjH,KAAKkH,SAAS,GAAG3D,KAEhC,GAA0B,kBAAtBvD,KAAKkG,cAAoClG,KAAKyG,kBAAoBC,EAASS,IAC7E1G,EAAIkD,UAAYJ,EAChB9C,EAAI4D,SAAS,EAAG,EAAG,IAAK,KACxBrE,KAAKmG,UAAY1F,EAAI+E,aAAa,EAAG,EAAG,IAAK,UACxC,GAAIxF,KAAKkG,eAAiBQ,EAASU,KACxC3G,EAAIkD,UAAYJ,EAChB9C,EAAI4D,SAAS,EAAG,EAAG,IAAK,KACxBrE,KAAKmG,UAAY1F,EAAI+E,aAAa,EAAG,EAAG,IAAK,UAE7C,KAAO9F,EAAS,GACdqH,EAAQF,EAAMQ,MACdP,EAAOC,OAAQ,EACfrH,GAAU,EACNqH,EAAM,IAAM,GAAKA,EAAM,IAAM,KAAOA,EAAM,IAAM,GAAKA,EAAM,IAAM,MACnEC,EAAc,QAAQhH,KAAKmG,UAAU7F,KAAgB,EAAXyG,EAAM,GAAS,IAAiB,EAAXA,EAAM,OAAW/G,KAAKmG,UAAU7F,KAAgB,EAAXyG,EAAM,GAAS,IAAiB,EAAXA,EAAM,GAAS,MAAM/G,KAAKmG,UAAU7F,KAAgB,EAAXyG,EAAM,GAAS,IAAiB,EAAXA,EAAM,GAAS,QAClMC,IAAgBhH,KAAKkG,gBAErBlG,KAAKmG,UAAU7F,KAAgB,EAAXyG,EAAM,GAAS,IAAiB,EAAXA,EAAM,IAC/C/G,KAAKmG,UAAU7F,KAAgB,EAAXyG,EAAM,GAAS,IAAiB,EAAXA,EAAM,GAAS,GACxD/G,KAAKmG,UAAU7F,KAAgB,EAAXyG,EAAM,GAAS,IAAiB,EAAXA,EAAM,GAAS,IACtD,CAACE,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAE7BH,EAAO,CAACC,EAAM,GAAK,EAAGA,EAAM,OAC/BF,EAAMS,KAAK,CAACP,EAAM,GAAK,EAAGA,EAAM,KAChCrH,GAAU,GAEPoH,EAAO,CAACC,EAAM,GAAK,EAAGA,EAAM,GAAK,MACpCF,EAAMS,KAAK,CAACP,EAAM,GAAK,EAAGA,EAAM,GAAK,IACrCrH,GAAU,GAEPoH,EAAO,CAACC,EAAM,GAAK,EAAGA,EAAM,GAAK,MACpCF,EAAMS,KAAK,CAACP,EAAM,GAAK,EAAGA,EAAM,GAAK,IACrCrH,GAAU,GAEPoH,EAAO,CAACC,EAAM,GAAK,EAAGA,EAAM,OAC/BF,EAAMS,KAAK,CAACP,EAAM,GAAK,EAAGA,EAAM,KAChCrH,GAAU,KAMpBe,EAAIgF,aAAazF,KAAKmG,UAAW,EAAG,GAGtC,YAAYhF,GACKvC,SAASI,cAAc,WACnB0B,WAAW,MAD9B,MAEMmE,EAAejG,SAASI,cAAc,yBACtC8F,EAAiBlG,SAASI,cAAc,2BAC3B,cAAfmC,EAAMuB,MAAwC,IAAhBvB,EAAM4D,OACtC/E,KAAKuH,UAAU1C,EAAanH,OAC5BsC,KAAKsD,oBAAoB2B,wBACD,cAAf9D,EAAMuB,MAAwC,IAAhBvB,EAAM4D,QAC7C/E,KAAKuH,UAAUzC,EAAepH,OAC9BsC,KAAKsD,oBAAoB2B,0BHxFzB5B,EAAa,IAAItD,EAEjBS,EAAS5B,SAASI,cAAc,WAEhCwI,GADMhH,EAAOE,WAAW,MACbhC,MAAMC,KAAKC,SAASI,cAAc,aAAa6C,WAC1D4F,EAAQ/I,MAAMC,KAAKC,SAASI,cAAc,iBAAiB6C,UAC3DxB,EAAQzB,SAASI,cAAc,eAC/B6F,EAAejG,SAASI,cAAc,yBACtC8F,EAAiBlG,SAASI,cAAc,2BACxC0I,EAAe9I,SAASI,cAAc,kBAmB5C,SAAS2I,EAAgBvG,GACvB,MAAMwG,EAAS,CAAC,YAAa,YAAa,UAAW,cACjDxG,EAAO7B,UAAUC,SAAS,qBAC5BoI,EAAOxI,QAASC,GAAOmB,EAAOlB,iBAAiBD,EAAI6F,IACnD0C,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI8F,IACtDyC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI+F,IACtDwC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI4G,KAC7C7E,EAAO7B,UAAUC,SAAS,8BACnCoI,EAAOxI,QAASC,GAAOmB,EAAOlB,iBAAiBD,EAAI4G,IACnD2B,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI6F,IACtD0C,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI8F,IACtDyC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI+F,KAC7ChE,EAAO7B,UAAUC,SAAS,wBACnCoI,EAAOxI,QAASC,GAAOmB,EAAOlB,iBAAiBD,EAAI8F,IACnDyC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI6F,IACtD0C,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI+F,IACtDwC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI4G,KAC7C7E,EAAO7B,UAAUC,SAAS,wBACnCoI,EAAOxI,QAASC,GAAOmB,EAAOlB,iBAAiBD,EAAI+F,IACnDwC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI6F,IACtD0C,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI8F,IACtDyC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI4G,KAC7C7E,EAAO7B,UAAUC,SAAS,+BACnCoI,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI6F,IACtD0C,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI8F,IACtDyC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI+F,IACtDwC,EAAOxI,QAASC,GAAOmB,EAAOqH,oBAAoBxI,EAAI4G,KA3C1D5F,EAAMf,iBAAiB,SAAU,KAC/B+D,EAAWG,eAGbnD,EAAMf,iBAAiB,SAAU+D,EAAWyE,aAE5CN,EAASpI,QAASC,GAAOA,EAAGC,iBAAiB,QAAS,KACpD,IAAK,IAAI7C,EAAI,EAAGA,EAAI+K,EAAS9H,OAAQjD,GAAK,EACpC+K,EAAS/K,GAAG8C,UAAUC,SAAS,iBACjCgI,EAAS/K,GAAG8C,UAAUI,OAAO,eAC7B6H,EAAS/K,GAAGoF,SAAS,GAAGtC,UAAUI,OAAO,iBAG7CN,EAAGE,UAAUK,IAAI,eACjBP,EAAGwC,SAAS,GAAGtC,UAAUK,IAAI,mBAsC/B6H,EAAMrI,QAASC,GAAOA,EAAGC,iBAAiB,QAAU6B,IAClD,IAAK,IAAI1E,EAAI,EAAGA,EAAIgL,EAAM/H,OAAQjD,GAAK,EACjCgL,EAAMhL,GAAG8C,UAAUC,SAAS,gBAC9BiI,EAAMhL,GAAG8C,UAAUI,OAAO,eAG9BN,EAAGE,UAAUK,IAAI,eAXnB,SAAwBuB,GACtB,MAAM,OAAEC,GAAWD,EACnBwG,EAAgBvG,GAUhB2G,CAAe5G,MAGjBuG,EAAapI,iBAAiB,QAAS,MACpCuF,EAAanH,MAAOoH,EAAepH,OAAS,CAACoH,EAAepH,MAAOmH,EAAanH,SAGpE,QItFf,MAAM4F,EAAsB,IAAI/C,EAChC,IAAI,EAAS7B,MAAMC,KAAKC,SAASC,iBAAiB,WAClD,MAAMmJ,EAAoBpJ,SAASI,cAAc,kBAEjDJ,SAASqJ,KAAK3I,iBAAiB,qBAAsB,KACnD,EAASZ,MAAMC,KAAKC,SAASC,iBAAiB,WAC9C,EAAOO,QAAQ,CAACC,EAAI5C,KAClB,MAAMyL,EAAU7I,EAChB6I,EAAQrG,SAAS,GAAG3B,YAAczD,EAAI,EACtCyL,EAAQrG,SAAS,GAAGvC,iBAAiB,QAASgE,EAAoB6E,aAClED,EAAQrG,SAAS,GAAGvC,iBAAiB,QAASgE,EAAoB8E,gBACnD,CAAC,YAAa,YAAa,YAAa,WAAY,YAAa,UAAW,WAAY,YAAa,YAAa,OAAQ,aAAc,UAChJhJ,QAASiJ,GAAOH,EAAQ5I,iBAAiB+I,EAAI/E,MAEtD,EAAOlE,QAASC,GAAOA,EAAGC,iBAAiB,QAAS,KAClD,IAAK,IAAI7C,EAAI,EAAGA,EAAI,EAAOiD,OAAQjD,GAAK,EAClC,EAAOA,GAAG8C,UAAUC,SAAS,iBAC/B,EAAO/C,GAAG8C,UAAUI,OAAO,gBAG/BN,EAAGE,UAAUK,IAAI,gBACjB0D,EAAoB9B,4BAIxBwG,EAAkB1I,iBAAiB,QAAS,KAC1CgE,EAAoBgF,aC1BtB,MAAMC,EAAe3J,SAASI,cAAc,gBACtCwJ,EAAW,ICFF,MACb,eACE,MAAMD,EAAe3J,SAASI,cAAc,gBAgB5CyJ,SAASC,OAAOC,oBARhB,SAA0BC,GACxB,GAAIA,GAPN,SAAaA,GACX,MAAMC,EAAMD,EAAKE,YAAYC,MAAM,KACnCR,EAAarI,YAAc,UAAU2I,EAAI,KACzCN,EAAarG,MAAMjB,MAAQ,cAKzB+H,CAAIJ,OACC,CACL,MAAMK,EAAW,IAAIR,SAASC,KAAKQ,mBACnCT,SAASC,OAAOS,mBAAmBF,SDZ3CV,EAAajJ,iBAAiB,QAAS,KACrCkJ,EAASY,iBEDX,MAAMC,EAASzK,SAASI,cAAc,WAChCsK,EAAc1K,SAASI,cAAc,iBACrCuK,EAAkB3K,SAASI,cAAc,8BACzCwK,EAAqB5K,SAASI,cAAc,sBAClD,IAAIyK,EAAmB/K,MAAMC,KAAKC,SAASC,iBAAiB,cACxD6K,EAAuBD,EAAiBE,IAAKtK,GAAOA,EAAGa,aAAa0J,KAAK,IAC7E,MAAM,EAAWlL,MAAMC,KAAKC,SAASI,cAAc,aAAa6C,UAC1D,EAAQnD,MAAMC,KAAKC,SAASI,cAAc,iBAAiB6C,UAC3DgI,EAAMjL,SAASI,cAAc,qBAC7B8K,EAAclL,SAASI,cAAc,8BACrC+K,EAASnL,SAASI,cAAc,wBAChCgH,EAASpH,SAASI,cAAc,wBAChC,EAAeJ,SAASI,cAAc,kBACtCgL,EAAmB,mCACnBC,EAAgB,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,cAAe,eAAgB,OAAQ,OAAQ,OACpJ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,YAAa,UAAW,YAAa,cAE/I,SAASC,EAAWC,GAClBd,EAAOnH,MAAMkI,QAAUD,EACvBb,EAAYpH,MAAMkI,QAAUD,EAG9B,SAASE,EAAelJ,GACtB,MAAM,OAAEC,GAAWD,EACnBC,EAAO7B,UAAUK,IAAI,cACrB0K,OAAOhL,iBAAiB,UAAY+I,IAClC,MAAMkC,EAAUlC,EAAGmC,KACnB,IAAwC,IAApCP,EAAcQ,QAAQF,GAAiB,OAC3C,MAAMG,EAAcT,EAAcQ,QAAQF,GACpCI,EAAYX,EAAiBU,GAGnC,GAFAjB,EAAmB/K,MAAMC,KAAKC,SAASC,iBAAiB,cACxD6K,EAAuBD,EAAiBE,IAAKtK,GAAOA,EAAGa,aAAa0J,KAAK,IACrEF,EAAqBe,QAAQE,IAAc,EAAG,CAChD,MAAMC,EAAQlB,EAAqBe,QAAQE,GAC3ClB,EAAiBmB,GAAOrL,UAAUK,IAAI,YACtC6J,EAAiBmB,GAAO1K,YAAc,MAExCkB,EAAOlB,YAAc,GAAG8J,EAAiBC,EAAcQ,QAAQF,MAC/Db,EAAuBD,EAAiBE,IAAKtK,GAAOA,EAAGa,aAAa0J,KAAK,IACzExI,EAAO7B,UAAUI,OAAO,cACxByB,EAAO7B,UAAUI,OAAO,aACvB,CAAEkL,MAAM,IAGbpB,EAAiBrK,QAASC,GAAOA,EAAGC,iBAAiB,QAAS+K,IAC9Db,EAAmBlK,iBAAiB,QAAS,IAAM4K,EAAW,UAC9DX,EAAgBjK,iBAAiB,QAAS,IAAM4K,EAAW,SAC3Db,EAAO/J,iBAAiB,QAAS,IAAM4K,EAAW,SAElDtL,SAASU,iBAAiB,UAAY6B,IACpC,MAAMP,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WAC9CiM,EAAclM,SAASI,cAAc,iBACrC+L,EAAa,IAAIC,MAAM,SAE7B,GAAkC,SAA9B1B,EAAYpH,MAAMkI,QACpB,OAAQjJ,EAAMqJ,MACZ,IAAK,GAAGP,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAI,EAAMiD,OAAQjD,GAAK,EACjC,EAAMA,GAAG8C,UAAUC,SAAS,gBAC9B,EAAM/C,GAAG8C,UAAUI,OAAO,eAG9BkK,EAAItK,UAAUK,IAAI,eAClB,EAAgBiK,GAChB,MAEF,IAAK,GAAGI,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAI,EAAMiD,OAAQjD,GAAK,EACjC,EAAMA,GAAG8C,UAAUC,SAAS,gBAC9B,EAAM/C,GAAG8C,UAAUI,OAAO,eAG9BmK,EAAYvK,UAAUK,IAAI,eAC1B,EAAgBkK,GAChB,MAEF,IAAK,GAAGG,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAI,EAAMiD,OAAQjD,GAAK,EACjC,EAAMA,GAAG8C,UAAUC,SAAS,gBAC9B,EAAM/C,GAAG8C,UAAUI,OAAO,eAG9BoK,EAAOxK,UAAUK,IAAI,eACrB,EAAgBmK,GAChB,MAEF,IAAK,GAAGE,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAI,EAAMiD,OAAQjD,GAAK,EACjC,EAAMA,GAAG8C,UAAUC,SAAS,gBAC9B,EAAM/C,GAAG8C,UAAUI,OAAO,eAG9BqG,EAAOzG,UAAUK,IAAI,eACrB,EAAgBoG,GAChB,MAEF,IAAK,GAAGiE,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAI,EAASiD,OAAQjD,GAAK,EAAG,CAC3C,GAAI,EAAS,GAAG8C,UAAUC,SAAS,eACjC,OAEF,GAAI,EAAS/C,GAAG8C,UAAUC,SAAS,eAKjC,OAJA,EAAS/C,GAAG8C,UAAUI,OAAO,eAC7B,EAASlD,GAAGoF,SAAS,GAAGtC,UAAUI,OAAO,gBACzC,EAASlD,EAAI,GAAG8C,UAAUK,IAAI,oBAC9B,EAASnD,EAAI,GAAGoF,SAAS,GAAGtC,UAAUK,IAAI,gBAI9C,MAEF,IAAK,GAAGqK,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAI,EAASiD,OAAQjD,GAAK,EAAG,CAC3C,GAAI,EAAS,GAAG8C,UAAUC,SAAS,eACjC,OAEF,GAAI,EAAS/C,GAAG8C,UAAUC,SAAS,eAKjC,OAJA,EAAS/C,GAAG8C,UAAUI,OAAO,eAC7B,EAASlD,GAAGoF,SAAS,GAAGtC,UAAUI,OAAO,gBACzC,EAASlD,EAAI,GAAG8C,UAAUK,IAAI,oBAC9B,EAASnD,EAAI,GAAGoF,SAAS,GAAGtC,UAAUK,IAAI,gBAI9C,MAEF,IAAK,GAAGqK,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAImE,EAAOlB,OAAQjD,GAAK,EAAG,CACzC,GAAImE,EAAO,GAAGrB,UAAUC,SAAS,gBAC/B,OAEF,GAAIoB,EAAOnE,GAAG8C,UAAUC,SAAS,gBAI/B,OAHAoB,EAAOnE,GAAG8C,UAAUI,OAAO,gBAC3BiB,EAAOnE,EAAI,GAAG8C,UAAUK,IAAI,qBAC5BW,EAAOlC,UAAUmD,uBAIrB,MAEF,IAAK,GAAGyI,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,IAAK,IAAIzD,EAAI,EAAGA,EAAImE,EAAOlB,OAAQjD,GAAK,EAAG,CACzC,GAAImE,EAAOA,EAAOlB,OAAS,GAAGH,UAAUC,SAAS,gBAC/C,OAEF,GAAIoB,EAAOnE,GAAG8C,UAAUC,SAAS,gBAI/B,OAHAoB,EAAOnE,GAAG8C,UAAUI,OAAO,gBAC3BiB,EAAOnE,EAAI,GAAG8C,UAAUK,IAAI,qBAC5BW,EAAOlC,UAAUmD,uBAIrB,MAEF,IAAK,GAAGyI,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjEK,EAAOlC,UAAUiK,WACjB,MAEF,IAAK,GAAG2B,EAAcD,EAAiBS,QAAQhB,EAAiB,GAAGvJ,gBACjE,GAAsB,IAAlBU,EAAOlB,OAAc,OACzBoL,EAAYG,cAAcF,GAC1BxK,EAAOlC,UAAU8J,YAAY4C,GAC7B,MAEF,IAAK,GAAGd,EAAcD,EAAiBS,QAAQhB,EAAiB,IAAIvJ,gBAClE4K,EAAYG,cAAcF,GAC1BxK,EAAOlC,UAAU+J,eAAe2C,GAChC,MAEF,IAAK,GAAGd,EAAcD,EAAiBS,QAAQhB,EAAiB,IAAIvJ,gBAClE,EAAa+K,cAAcF,M,KCzKnC,MAAMG,EAAkB,ICLT,MAEb,cACmBxM,MAAMC,KAAKC,SAASI,cAAc,aAAa6C,UACvDzC,QAAQ,CAACC,EAAI5C,KAChB4C,EAAGE,UAAUC,SAAS,gBACxB2L,aAAaC,QAAQ,oBAAqB,GAAG3O,OAKnD,iBACgBiC,MAAMC,KAAKC,SAASI,cAAc,iBAAiB6C,UAC3DzC,QAAQ,CAACC,EAAI5C,KACb4C,EAAGE,UAAUC,SAAS,gBACxB2L,aAAaC,QAAQ,oBAAqB,GAAG3O,OAKnD,mBACE,MAAMoI,EAAejG,SAASI,cAAc,yBAC5CmM,aAAaC,QAAQ,sBAAuB,GAAGvG,EAAanH,SAG9D,qBACE,MAAMoH,EAAiBlG,SAASI,cAAc,2BAC9CmM,aAAaC,QAAQ,wBAAyB,GAAGtG,EAAepH,SAGlE,mBACE,MAAMkD,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WACpDsM,aAAaC,QAAQ,gBAAiB,GAAGxK,EAAOlB,UAGlD,kBACiBhB,MAAMC,KAAKC,SAASC,iBAAiB,WAC7CO,QAAQ,CAACC,EAAI5C,KACd4C,EAAGE,UAAUC,SAAS,iBACxB2L,aAAaC,QAAQ,qBAAsB,GAAG3O,OAKpD,iBACE,MAAM+D,EAAS5B,SAASI,cAAc,WAC1BwB,EAAOE,WAAW,MACfhC,MAAMC,KAAKC,SAASC,iBAAiB,WAC7CO,QAAQ,CAACC,EAAI5C,KAClB0O,aAAaC,QAAQ,eAAe3O,EAAI,IAAK4C,EAAGwC,SAAS,GAAGwJ,eAE9DF,aAAaC,QAAQ,eAAgB5K,EAAO6K,aAG9C,iBACE,MAAMhL,EAAQzB,SAASI,cAAc,eACrCmM,aAAaC,QAAQ,cAAe,GAAG/K,EAAM3C,SAC7CyN,aAAaC,QAAQ,cAAe,GAAG/K,EAAMC,QAG/C,qBACE,MAAMgL,EAAiB1M,SAASI,cAAc,oBAC9CmM,aAAaC,QAAQ,kBAAmB,GAAGE,EAAe5N,SAG5D,qBACE,MACMgM,EADmBhL,MAAMC,KAAKC,SAASC,iBAAiB,cAChB8K,IAAKtK,GAAOA,EAAGa,aAC7DiL,aAAaC,QAAQ,qBAAsBG,KAAKC,UAAU9B,MD9DxD+B,EAAkB,IENT,MAEb,gBACE,MAAMhE,EAAQ/I,MAAMC,KAAKC,SAASI,cAAc,iBAAiB6C,UACjE,GAAkD,OAA9CsJ,aAAaO,QAAQ,qBAA+B,CAEtDjE,EADwB0D,aAAaO,QAAQ,sBACtBnM,UAAUK,IAAI,oBAErC6H,EAAM,GAAGlI,UAAUK,IAAI,eAI3B,aACE,MAAM4H,EAAW9I,MAAMC,KAAKC,SAASI,cAAc,aAAa6C,UAChE,GAAkD,OAA9CsJ,aAAaO,QAAQ,qBAA+B,CACtD,MAAMC,EAAkBR,aAAaO,QAAQ,qBAC7ClE,EAASmE,GAAiBpM,UAAUK,IAAI,eACxC4H,EAASmE,GAAiB9J,SAAS,GAAGtC,UAAUK,IAAI,qBAEpD4H,EAAS,GAAGjI,UAAUK,IAAI,eAC1B4H,EAAS,GAAG3F,SAAS,GAAGtC,UAAUK,IAAI,gBAI1C,kBACE,MAAMiF,EAAejG,SAASI,cAAc,yBACQ,OAAhDmM,aAAaO,QAAQ,uBACvB7G,EAAanH,MAAQyN,aAAaO,QAAQ,uBAE1C7G,EAAanH,MAAQ,UAIzB,oBACE,MAAMoH,EAAiBlG,SAASI,cAAc,2BACQ,OAAlDmM,aAAaO,QAAQ,yBACvB5G,EAAepH,MAAQyN,aAAaO,QAAQ,yBAE5C5G,EAAepH,MAAQ,UAI3B,kBACE,MAAMiD,EAAkB/B,SAASI,cAAc,qBAC/C,GAA8C,OAA1CmM,aAAaO,QAAQ,iBAA2B,CAClD,MAAME,EAAe9I,OAAOqI,aAAaO,QAAQ,kBAC3CG,EAAiB,0fAQvB,IAAK,IAAIpP,EAAI,EAAGA,EAAImP,EAAe,EAAGnP,GAAK,EACzCkE,EAAgBmL,mBAAmB,YAAaD,IAKtD,iBACE,MAAMjL,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WACpD,GAAmD,OAA/CsM,aAAaO,QAAQ,sBAAgC,CAEvD9K,EADuBuK,aAAaO,QAAQ,uBACrBnM,UAAUK,IAAI,qBAErCgB,EAAO,GAAGrB,UAAUK,IAAI,gBAI5B,gBACE,MACMa,EADS7B,SAASI,cAAc,WACnB0B,WAAW,MAa9B,GAZehC,MAAMC,KAAKC,SAASC,iBAAiB,WAC7CO,QAAQ,CAACC,EAAI5C,KAClB,GAAqD,OAAjD0O,aAAaO,QAAQ,eAAejP,EAAI,KAAe,CACzD,MACM6F,EADcjD,EAAGwC,SAAS,GACHnB,WAAW,MAClCqL,EAAiBZ,aAAaO,QAAQ,eAAejP,EAAI,KACzDuP,EAAM,IAAIC,MAChBD,EAAIE,IAAMH,EACVC,EAAIG,OAAS,IAAM7J,EAASF,UAAU4J,EAAK,EAAG,MAIL,OAAzCb,aAAaO,QAAQ,gBAA0B,CACjD,MAAMU,EAAYjB,aAAaO,QAAQ,gBACjCM,EAAM,IAAIC,MAChBD,EAAIE,IAAME,EACVJ,EAAIG,OAAS,IAAM1L,EAAI2B,UAAU4J,EAAK,EAAG,IAI7C,gBACE,MAAM3L,EAAQzB,SAASI,cAAc,eAC/BmB,EAAkBvB,SAASI,cAAc,wBACzCoB,EAAmBxB,SAASI,cAAc,yBAEJ,OAAxCmM,aAAaO,QAAQ,eACvBrL,EAAM3C,MAAQyN,aAAaO,QAAQ,eAEnCrL,EAAM3C,MAAQ,IAG4B,OAAxCyN,aAAaO,QAAQ,gBACvBrL,EAAMC,KAAO6K,aAAaO,QAAQ,eAClCvL,EAAgBzC,MAAQ,GAAG2C,EAAMC,OACjCF,EAAiB1C,MAAQ,GAAG2C,EAAMC,SAElCD,EAAMC,KAAO,KACbH,EAAgBzC,MAAQ,GAAG2C,EAAMC,OACjCF,EAAiB1C,MAAQ,GAAG2C,EAAMC,QAItC,oBACE,MAAMgL,EAAiB1M,SAASI,cAAc,oBACxCqN,EAAuBzN,SAASI,cAAc,eAEJ,OAA5CmM,aAAaO,QAAQ,oBACvBJ,EAAe5N,MAAQyN,aAAaO,QAAQ,mBAC5CW,EAAqBnM,YAAc,GAAGoL,EAAe5N,cAErD4N,EAAe5N,MAAQ,IACvB2O,EAAqBnM,YAAc,GAAGoL,EAAe5N,aAIzD,oBACE,MAAM+L,EAAmB/K,MAAMC,KAAKC,SAASC,iBAAiB,cAC9D,GAAmD,OAA/CsM,aAAaO,QAAQ,sBAAgC,CACvD,MAAMhC,EAAuB6B,KAAKe,MAAMnB,aAAaO,QAAQ,uBAC7DjC,EAAiBrK,QAAQ,CAACC,EAAI5C,KACf4C,EACRa,YAAcwJ,EAAqBjN,SAErC,CACL,MAAMiN,EAAuB,eAC7BD,EAAiBrK,QAAQ,CAACC,EAAI5C,KACf4C,EACRa,YAAcwJ,EAAqBjN,QFrI1C,EAAsB,IAAI8D,EAEhC+J,OAAOhL,iBAAiB,eAAgB,KACtC4L,EAAgBqB,cAChBrB,EAAgBsB,iBAChBtB,EAAgBuB,mBAChBvB,EAAgBwB,qBAChBxB,EAAgByB,mBAChBzB,EAAgB0B,kBAChB1B,EAAgB2B,iBAChB3B,EAAgB4B,iBAChB5B,EAAgB6B,qBAChB7B,EAAgB8B,uBAGlB1C,OAAOhL,iBAAiB,OAAQ,KAC9BmM,EAAgBwB,aAChBxB,EAAgByB,gBAChBzB,EAAgB0B,kBAChB1B,EAAgB2B,oBAChB3B,EAAgB4B,kBAChB5B,EAAgB6B,iBAChB7B,EAAgB8B,gBAChB9B,EAAgB+B,gBAChB/B,EAAgBgC,oBAChBhC,EAAgBiC,oBAChB,MAAMC,EAAa/O,SAASI,cAAc,gBAC1C,EAAgB2O,GAChB,EAAoBnM,yBGhCtB,MAAMoM,EAAY,ICFH,MACb,sBACiBhP,SAASI,cAAc,WACnB0B,WAAW,MAD9B,MAEME,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WAC9CgP,EAAoBjP,SAASI,cAAc,mBAC3C8O,EAAkBlP,SAASI,cAAc,oBACzC+O,EAAkBnP,SAASI,cAAc,oBACzCgP,EAA0BpP,SAASI,cAAc,8BACjDiP,EAA0BrP,SAASI,cAAc,8BAEjC,IAAlB4B,EAAOlB,OACTsO,EAAwB9N,YAAc,GAAG2N,EAAkBnQ,MAAQoQ,EAAgBpQ,WAAWmQ,EAAkBnQ,MAAQqQ,EAAgBrQ,aAAakD,EAAOlB,eAE5JsO,EAAwB9N,YAAc,GAAG2N,EAAkBnQ,MAAQoQ,EAAgBpQ,WAAWmQ,EAAkBnQ,MAAQqQ,EAAgBrQ,aAAakD,EAAOlB,gBAEhI,MAA1BoO,EAAgBpQ,OAA2C,MAA1BqQ,EAAgBrQ,MACnDuQ,EAAwB/N,YAAc,GAAG4N,EAAgBpQ,iBAAiBqQ,EAAgBrQ,aACvD,MAA1BoQ,EAAgBpQ,OAA2C,MAA1BqQ,EAAgBrQ,MAC1DuQ,EAAwB/N,YAAc,GAAG4N,EAAgBpQ,iBAAiBqQ,EAAgBrQ,cACvD,MAA1BoQ,EAAgBpQ,OAA2C,MAA1BqQ,EAAgBrQ,QAC1DuQ,EAAwB/N,YAAc,GAAG4N,EAAgBpQ,kBAAkBqQ,EAAgBrQ,cAI/F,mBACE,MAAM8C,EAAS5B,SAASI,cAAc,WAEhCkP,GADM1N,EAAOE,WAAW,MACpB9B,SAASuP,cAAc,MACjCD,EAAEE,KAAO5N,EAAO6K,YAChB6C,EAAEG,SAAW,mBACbH,EAAEI,UD5BAC,EAAY,IEHH,MACb,cACEvO,KAAKwO,UAAY,KAGnB,cACE,MAAMlD,EAAiB1M,SAASI,cAAc,oBACxCyP,EAAO7P,SAASI,cAAc,oBAC9B0P,EAAW,IAAO5L,OAAOwI,EAAe5N,QAEzB,IAAjB+Q,EAAKE,QACP3O,KAAKwO,UAAY,EAEjBxO,KAAKwO,UAAY,EAEnB,MAAMI,EAAU,IAAIC,WACdC,EAASC,EAAEC,OAAO,CACtBpO,OAAQmO,EAAE,iBAAiBpF,IAAI,CAAClN,EAAGwS,IAAMA,EAAEvO,WAAW,OAAOwO,UAC7DC,SAAU,kBACVC,OAAQpP,KAAKwO,UACba,MAAOX,EACPY,QAAS,EACTC,YAAa,OAEfX,EAAQY,UAAUV,EAAOM,QACzBR,EAAQa,SAASX,EAAOO,OACxBT,EAAQc,WAAWZ,EAAOQ,SAC1BV,EAAQe,eAAeb,EAAOS,aAC9BX,EAAQgB,QACRd,EAAOlO,OAAOxB,QAASyQ,GAAUjB,EAAQtG,SAASuH,IAClDjB,EAAQkB,SACRlB,EAAQP,SAASS,EAAOK,YF1B5B,IAAI,EAASzQ,MAAMC,KAAKC,SAASC,iBAAiB,WAClD,MAAMkR,EAAmBrR,MAAMC,KAAKC,SAASC,iBAAiB,sBACxDgP,EAAoBjP,SAASI,cAAc,mBAC3CgR,EAAcpR,SAASI,cAAc,qBACrCiR,EAAiBrR,SAASI,cAAc,kBACxCkR,EAActR,SAASI,cAAc,iBACrC8O,GAAkBlP,SAASI,cAAc,oBACzC+O,GAAkBnP,SAASI,cAAc,oBAE/CsL,OAAOhL,iBAAiB,mBAAoB,KAC1C4Q,EAAYhQ,YAAc,IAAI2N,EAAkBnQ,MAAQ,IAAIyS,QAAQ,MACpEvC,EAAUwC,wBAGZL,EAAiB3Q,QAASC,GAAOA,EAAGC,iBAAiB,QAAS,KAC5D,IAAK,IAAI7C,EAAI,EAAGA,EAAIsT,EAAiBrQ,OAAQjD,GAAK,EAChDsT,EAAiBtT,GAAGiB,MAAQ2B,EAAG3B,MAEjCwS,EAAYhQ,YAAc,IAAIb,EAAG3B,MAAQ,IAAIyS,QAAQ,MACrDvC,EAAUwC,yBAGZtC,GAAgBxO,iBAAiB,QAAS,KACxC,EAASZ,MAAMC,KAAKC,SAASC,iBAAiB,WAC9CiP,GAAgBuC,IAAM,GAAG,EAAO3Q,SAC5BoO,GAAgBpQ,MAAQoQ,GAAgBuC,MAC1CvC,GAAgBpQ,MAAQoQ,GAAgBuC,KAE1CtC,GAAgBrQ,MAAQqG,KAAKuM,KAAK,EAAO5Q,OAASoO,GAAgBpQ,OAClEkQ,EAAUwC,wBAGZH,EAAe3Q,iBAAiB,QAASsO,EAAU2C,kBAEnDP,EAAY1Q,iBAAiB,QAASiP,EAAUiC,aGtChD,MAAMC,GAAY,ICFH,MACb,cACEzQ,KAAK0Q,WAAa,EAGpB,SACE,MAAM9P,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WAChDmB,KAAK0Q,WAAa9P,EAAOlB,OAAS,EACpCM,KAAK0Q,YAAc,EAEnB1Q,KAAK0Q,WAAa,EAItB,SACE,MAAM9P,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WAC9C8R,EAAiB/R,SAASI,cAAc,6BACxC4R,EAAcD,EAAejQ,WAAW,MAC9CkQ,EAAY5P,UAAU,EAAG,EAAG2P,EAAe1P,MAAO0P,EAAezP,QACjE,MAAM2P,EAAWjQ,EAAOZ,KAAK0Q,YAAY7O,SAAS,GAElD+O,EAAYxO,UAAUyO,EAAU,EAAG,EAAGA,EAAS5P,MAAO4P,EAAS3P,OAAQ,EAAG,EAAGyP,EAAe1P,MAAO0P,EAAezP,QAGpH,QACE,MAAMyP,EAAiB/R,SAASI,cAAc,6BACxC4R,EAAcD,EAAejQ,WAAW,MACxC4K,EAAiB1M,SAASI,cAAc,oBAWxCyP,EAAO,IAAMqC,WAAW,KAC5B,MAAMlQ,EAASlC,MAAMC,KAAKC,SAASC,iBAAiB,WAChDmB,KAAK0Q,WAAa9P,EAAOlB,OAAS,EACpCM,KAAK0Q,YAAc,EAEnB1Q,KAAK0Q,WAAa,EAEpBE,EAAY5P,UAAU,EAAG,EAAG2P,EAAe1P,MAAO0P,EAAezP,QACjE,MAAM2P,EAAWjQ,EAAOZ,KAAK0Q,YAAY7O,SAAS,GAClD+O,EAAYrO,uBAAwB,EAEpCqO,EAAYxO,UAAUyO,EAAU,EAAG,EAAGA,EAAS5P,MAAO4P,EAAS3P,OAAQ,EAAG,EAAGyP,EAAe1P,MAAO0P,EAAezP,QAClHoJ,OAAOyG,sBAAsBtC,IAC3B,IAAOnD,EAAe5N,OAAWsT,IAtBrB,MACd,MACMH,EADcjS,SAASI,cAAc,iBACd6C,SAAS,GACtC+O,EAAYrO,uBAAwB,EACpCqO,EAAY5P,UAAU,EAAG,EAAG2P,EAAe1P,MAAO0P,EAAezP,QAEjE0P,EAAYxO,UAAUyO,EAAU,EAAG,EAAGA,EAAS5P,MAAO4P,EAAS3P,OAAQ,EAAG,EAAGyP,EAAe1P,MAAO0P,EAAezP,SAgBpE+P,GAAa,IAAO3F,EAAe5N,OAEnF4M,OAAOyG,sBAAsBtC,GAI/B,YAAYtN,GACV,MAAMC,EAASD,EAAMC,OAAOC,QAAQ,OACpC,OAAQF,EAAMuB,MACZ,IAAK,YACHtB,EAAOS,SAAS,GAAGK,MAAMC,WAAa,WAM5C,iBACE,MAAMwO,EAAiB/R,SAASI,cAAc,6BAC1B2R,EAAejQ,WAAW,OAC1C9B,SAASsS,mBAAqBtS,SAASuS,2BACrC,sBAAuBR,EACzBA,EAAeS,oBACN,4BAA6BT,GACtCA,EAAeU,6BDvEjBC,GAAe1S,SAASI,cAAc,sBACtCsM,GAAiB1M,SAASI,cAAc,oBACxCuS,GAAqB3S,SAASI,cAAc,eAC5CwS,GAAoB5S,SAASI,cAAc,wBAG3CyS,IAFiB7S,SAASI,cAAc,6BACX0B,WAAW,MACZ9B,SAASI,cAAc,8BAGzDyR,GAAUb,QAEV0B,GAAahS,iBAAiB,QAASmR,GAAUiB,gBAEjDpG,GAAehM,iBAAiB,SAAU,KACxCiS,GAAmBrR,YAAc,GAAGoL,GAAe5N,cAGrD8T,GAAkBlS,iBAAiB,YAAa,KAC9CmS,GAA0BvP,MAAMC,WAAa,YAG/CqP,GAAkBlS,iBAAiB,WAAY,KAC7CmS,GAA0BvP,MAAMC,WAAa,WAG/CoP,GAAmBrR,YAAc,GAAGoL,GAAe5N","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const settingsTabs = Array.from(document.querySelectorAll('.settings_tab'));\nconst settingsContents = Array.from(document.querySelectorAll('.settings_content'));\nconst settingsTabsContainer = document.querySelector('.right_section-settings_tabs');\nconst settingsContentContainer = document.querySelector('.right_section-settings_content');\nconst formatTabs = Array.from(document.querySelectorAll('.format_tab'));\nconst formatTabsContents = Array.from(document.querySelectorAll('.format_tab-content'));\n\nsettingsTabs.forEach((el, i) => el.addEventListener('click', () => {\n  if (el.classList.contains('active_tab') === false) {\n    for (let j = 0; j < settingsTabs.length; j += 1) {\n      if (settingsTabs[j].classList.contains('active_tab')) {\n        settingsTabs[j].classList.remove('active_tab');\n        settingsContents[j].classList.remove('visible_content');\n      }\n    }\n    el.classList.add('active_tab');\n    settingsContents[i].classList.add('visible_content');\n  } else if (el.classList.contains('active_tab') === true) {\n    el.classList.remove('active_tab');\n    settingsContents[i].classList.remove('visible_content');\n  }\n  if (settingsTabs.some((elem) => elem.classList.contains('active_tab'))) {\n    settingsTabsContainer.classList.add('expanded');\n    settingsContentContainer.classList.add('visible');\n  } else {\n    settingsTabsContainer.classList.remove('expanded');\n    settingsContentContainer.classList.remove('visible');\n  }\n}));\n\nformatTabs.forEach((el, i) => el.addEventListener('click', () => {\n  if (el.classList.contains('format_tab-active') === false) {\n    for (let j = 0; j < formatTabs.length; j += 1) {\n      if (formatTabs[j].classList.contains('format_tab-active')) {\n        formatTabs[j].classList.remove('format_tab-active');\n        formatTabsContents[j].classList.remove('visible_options');\n      }\n    }\n    el.classList.add('format_tab-active');\n    formatTabsContents[i].classList.add('visible_options');\n  }\n}));\n","/* eslint-disable consistent-return, no-undef */\nexport default class CanvasSize {\n  constructor() {\n    this.pixelSize = null;\n  }\n\n  displayCanvasSize() {\n    const canvasSizeWidth = document.querySelector('.canvas_width__value');\n    canvasSizeWidth.textContent = this.pixelSize;\n    return this.pixelSize;\n  }\n\n  chooseSize() {\n    const canvasSizeWidth = document.querySelector('.canvas_width__value');\n    const canvasSizeHeight = document.querySelector('.canvas_height__value');\n    const range = document.querySelector('.range_line');\n    if (range.value === '1') {\n      this.pixelSize = '32';\n      range.data = this.pixelSize;\n      canvasSizeWidth.value = `${range.data}`;\n      canvasSizeHeight.value = `${range.data}`;\n      return this.pixelSize;\n    }\n    if (range.value === '2') {\n      this.pixelSize = '64';\n      range.data = this.pixelSize;\n      canvasSizeWidth.value = `${range.data}`;\n      canvasSizeHeight.value = `${range.data}`;\n      return this.pixelSize;\n    }\n    if (range.value === '3') {\n      this.pixelSize = '128';\n      range.data = this.pixelSize;\n      canvasSizeWidth.value = `${range.data}`;\n      canvasSizeHeight.value = `${range.data}`;\n      return this.pixelSize;\n    }\n  }\n}\n","export default class Frames {\n/* eslint-disable class-methods-use-this, no-unused-vars, max-len, default-case */\n  addFrame() {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const framesContainer = document.querySelector('.frames_container');\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    for (let i = 0; i < frames.length; i += 1) {\n      if (frames[i].classList.contains('frame-active')) {\n        frames[i].classList.remove('frame-active');\n      }\n    }\n    const newFrame = frames[0].cloneNode(true);\n    framesContainer.append(newFrame);\n    newFrame.classList.add('frame-active');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  }\n\n  deleteFrame(event) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    const target = event.target.closest('div');\n    const prevSibling = target.previousElementSibling;\n    if (target.classList.contains('frame-active') && prevSibling) {\n      prevSibling.classList.add('frame-active');\n      Frames.prototype.putFrameDataOnCanvas();\n    } else if (target.classList.contains('frame-active') && (target === frames[0])) {\n      frames[0].classList.remove('frame-active');\n      frames[1].classList.add('frame-active');\n      Frames.prototype.putFrameDataOnCanvas();\n    }\n    target.remove();\n    event.stopPropagation();\n  }\n\n  duplicateFrame(event) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const framesContainer = document.querySelector('.frames_container');\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    for (let i = 0; i < frames.length; i += 1) {\n      if (frames[i].classList.contains('frame-active')) {\n        frames[i].classList.remove('frame-active');\n      }\n    }\n    const target = event.target.closest('div');\n    const targetNextSibling = target.nextElementSibling;\n    const targetCanvas = target.children[0];\n    const targetCanvasCtx = targetCanvas.getContext('2d');\n    const duplicate = target.cloneNode(true);\n\n    framesContainer.insertBefore(duplicate, targetNextSibling);\n    duplicate.classList.add('frame-active');\n    const duplicateCanvas = duplicate.children[0];\n    const duplicateCanvasCtx = duplicateCanvas.getContext('2d');\n    const duplicateButtons = [duplicate.querySelector('.button-frame_delete'), duplicate.querySelector('.button-frame_move'), duplicate.querySelector('.button-frame_duplicate')];\n    duplicateButtons.forEach((el) => {\n      const current = el;\n      current.style.visibility = 'hidden';\n    });\n\n    duplicateCanvasCtx.drawImage(targetCanvas, 0, 0, targetCanvas.width, targetCanvas.height, 0, 0, duplicateCanvas.width, duplicateCanvas.height);\n    event.stopPropagation();\n  }\n\n  putCanvasDataOnFrame() {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const activeFrame = document.querySelector('.frame-active');\n    const canvasFrame = activeFrame.children[0];\n    const ctxFrame = canvasFrame.getContext('2d');\n    ctxFrame.clearRect(0, 0, canvasFrame.width, canvasFrame.height);\n    ctxFrame.imageSmoothingEnabled = false;\n    ctxFrame.drawImage(canvas, 0, 0, canvas.width, canvas.height, 0, 0, canvasFrame.width, canvasFrame.height);\n  }\n\n  putFrameDataOnCanvas() {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const activeFrame = document.querySelector('.frame-active');\n    const canvasFrame = activeFrame.children[0];\n    const ctxFrame = canvasFrame.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.imageSmoothingEnabled = false;\n    ctx.drawImage(canvasFrame, 0, 0, canvasFrame.width, canvasFrame.height, 0, 0, canvas.width, canvas.height);\n  }\n\n  handleEvent(event) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const frames = Array.from(document.querySelectorAll('.frame'));\n\n    for (let i = 0; i < frames.length; i += 1) {\n      const target = event.target.closest('div');\n      const frameButtons = [target.querySelector('.button-frame_delete'), target.querySelector('.button-frame_move'), target.querySelector('.button-frame_duplicate')];\n      const frameChildren = [target.children[0], target.children[1]];\n      const framesContainer = document.querySelector('.frames_container');\n      const framesSection = document.querySelector('.left_section-frames');\n\n      switch (event.type) {\n        case 'mouseover':\n          frameButtons.forEach((el) => {\n            if (target === framesContainer.children[0] && framesContainer.children.length === 1) {\n              frameButtons[2].style.visibility = 'visible';\n            } else {\n              const current = el;\n              current.style.visibility = 'visible';\n            }\n          });\n          break;\n\n        case 'mouseout':\n          frameButtons.forEach((el) => {\n            const current = el;\n            current.style.visibility = 'hidden';\n          });\n          break;\n\n        case 'dragstart':\n          this.dragged = target;\n          break;\n\n        case 'dragenter':\n          event.preventDefault();\n          event.stopImmediatePropagation();\n\n          if (Number(this.dragged.children[1].textContent) > Number(target.children[1].textContent)) {\n            const replacedNode = framesContainer.replaceChild(this.dragged, target);\n            framesContainer.insertBefore(replacedNode, this.dragged.nextElementSibling);\n            return;\n          }\n\n          if (Number(this.dragged.children[1].textContent) < Number(target.children[1].textContent)) {\n            const replacedNode = framesContainer.replaceChild(this.dragged, target);\n            framesContainer.insertBefore(replacedNode, this.dragged);\n            return;\n          }\n          break;\n\n        case 'dragover':\n          event.preventDefault();\n          frameChildren.forEach((el) => {\n            const current = el;\n            current.style.visibility = 'hidden';\n          });\n          frameButtons.forEach((el) => {\n            const current = el;\n            current.style.visibility = 'hidden';\n          });\n          target.classList.add('over');\n          break;\n\n        case 'dragleave':\n          event.preventDefault();\n          break;\n\n        case 'dragend':\n          for (let k = 0; k < frames.length; k += 1) {\n            if (frames[k].classList.contains('frame-active')) {\n              frames[k].classList.remove('frame-active');\n            }\n          }\n          this.dragged.classList.add('frame-active');\n          this.putFrameDataOnCanvas();\n          target.classList.remove('over');\n          frameChildren.forEach((el) => {\n            const current = el;\n            current.style.visibility = 'visible';\n          });\n          break;\n\n        case 'drop':\n          event.stopImmediatePropagation();\n\n          if (Number(this.dragged.children[1].textContent) > Number(target.children[1].textContent)) {\n            const replacedNode = framesContainer.replaceChild(this.dragged, target);\n            framesContainer.insertBefore(replacedNode, this.dragged.nextElementSibling);\n            target.classList.remove('over');\n            frameChildren.forEach((el) => {\n              const current = el;\n              current.style.visibility = 'visible';\n            });\n            for (let j = 0; j < frames.length; j += 1) {\n              if (frames[j].classList.contains('frame-active')) {\n                frames[j].classList.remove('frame-active');\n              }\n            }\n            this.dragged.classList.add('frame-active');\n            this.putFrameDataOnCanvas();\n            return;\n          }\n          if (Number(this.dragged.children[1].textContent) < Number(target.children[1].textContent)) {\n            const replacedNode = framesContainer.replaceChild(this.dragged, target);\n            framesContainer.insertBefore(replacedNode, this.dragged);\n            target.classList.remove('over');\n            frameChildren.forEach((el) => {\n              const current = el;\n              current.style.visibility = 'visible';\n            });\n            for (let j = 0; j < frames.length; j += 1) {\n              if (frames[j].classList.contains('frame-active')) {\n                frames[j].classList.remove('frame-active');\n              }\n            }\n            this.dragged.classList.add('frame-active');\n            this.putFrameDataOnCanvas();\n            return;\n          }\n          break;\n      }\n    }\n  }\n}\n","import CanvasSize from '../modal-dialog/canvas_size';\nimport Frames from '../frame-list/frames';\n\n/* eslint-disable no-restricted-globals, max-len, default-case */\nexport default class Pen {\n  constructor() {\n    this.flag = null;\n    this.lastX = null;\n    this.lastY = null;\n    this.canvasSize = new CanvasSize();\n    this.framesFunctionality = new Frames();\n  }\n\n  drawBrasenham(color) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const range = document.querySelector('.range_line');\n    this.canvasSize.chooseSize();\n    const activeSize = document.querySelector('.active_size');\n    const activeSizeValue = activeSize.getAttribute('value');\n    ctx.fillStyle = color;\n    if (!this.flag) return;\n    let x1 = this.lastX;\n    let y1 = this.lastY;\n    const field = (512 / range.data);\n    x1 = Math.floor(this.lastX / field);\n    y1 = Math.floor(this.lastY / field);\n    let x2 = event.offsetX;\n    let y2 = event.offsetY;\n    x2 = Math.floor(x2 / field);\n    y2 = Math.floor(y2 / field);\n\n    if (x1 === x2 && y1 === y2) {\n      ctx.fillRect(x1 * field, y1 * field, field * activeSizeValue, field * activeSizeValue);\n      return;\n    }\n    const deltaX = x2 - x1;\n    const deltaY = y2 - y1;\n    const sightX = (deltaX < 0) ? -1 : 1;\n    const sightY = (deltaY < 0) ? -1 : 1;\n\n    if (Math.abs(deltaY) < Math.abs(deltaX)) {\n      const b = y1 - (deltaY / deltaX) * x1;\n\n      while (x1 !== x2) {\n        ctx.fillRect(x1 * field, Math.round((deltaY / deltaX) * x1 + b) * field, field * activeSizeValue, field * activeSizeValue);\n        x1 += sightX;\n      }\n    } else if (Math.abs(deltaY) > Math.abs(deltaX)) {\n      const b = x1 - (deltaX / deltaY) * y1;\n      while (y1 !== y2) {\n        ctx.fillRect(Math.round((deltaX / deltaY) * y1 + b) * field, y1 * field, field * activeSizeValue, field * activeSizeValue);\n        y1 += sightY;\n      }\n    }\n    ctx.fillRect(x2 * field, y2 * field, field * activeSizeValue, field * activeSizeValue);\n  }\n\n  handleEvent(event) {\n    const primaryColor = document.querySelector('.color_select-primary');\n    const secondaryColor = document.querySelector('.color_select-secondary');\n    let color = null;\n    switch (event.which) {\n      case 1:\n        color = primaryColor.value;\n        break;\n\n      case 3:\n        color = secondaryColor.value;\n        break;\n\n      default:\n        color = secondaryColor.value;\n        break;\n    }\n    switch (event.type) {\n      case 'mousemove':\n        this.drawBrasenham(color);\n        [this.lastX, this.lastY] = [event.offsetX, event.offsetY];\n        break;\n\n      case 'mousedown':\n        this.flag = true;\n        [this.lastX, this.lastY] = [event.offsetX, event.offsetY];\n        this.drawBrasenham(color);\n        break;\n\n      case 'mouseup':\n        this.flag = false;\n        this.drawBrasenham(color);\n        this.framesFunctionality.putCanvasDataOnFrame();\n        break;\n\n      case 'mouseleave':\n        this.flag = false;\n        this.drawBrasenham(color);\n        break;\n    }\n  }\n}\n","import Eraser from './eraser';\nimport PaintBucket from './paint_bucket';\nimport Pen from './pen';\nimport Stroke from './stroke';\nimport CanvasSize from '../modal-dialog/canvas_size';\n\n/* eslint-disable no-unused-vars */\nconst penFunctionality = new Pen();\nconst eraserFunctionality = new Eraser();\nconst strokeFunctionality = new Stroke();\nconst paintBucketFunctionality = new PaintBucket();\nconst canvasSize = new CanvasSize();\n\nconst canvas = document.querySelector('.canvas');\nconst ctx = canvas.getContext('2d');\nconst penSizes = Array.from(document.querySelector('.pen_size').children);\nconst tools = Array.from(document.querySelector('.drawing_tool').children);\nconst range = document.querySelector('.range_line');\nconst primaryColor = document.querySelector('.color_select-primary');\nconst secondaryColor = document.querySelector('.color_select-secondary');\nconst revertColors = document.querySelector('.revert_colors');\n\nrange.addEventListener('change', () => {\n  canvasSize.chooseSize();\n});\n\nrange.addEventListener('change', canvasSize.handleEvent);\n\npenSizes.forEach((el) => el.addEventListener('click', () => {\n  for (let i = 0; i < penSizes.length; i += 1) {\n    if (penSizes[i].classList.contains('active_size')) {\n      penSizes[i].classList.remove('active_size');\n      penSizes[i].children[0].classList.remove('active_inner');\n    }\n  }\n  el.classList.add('active_size');\n  el.children[0].classList.add('active_inner');\n}));\n\nfunction drawingToolsFun(target) {\n  const events = ['mousemove', 'mousedown', 'mouseup', 'mouseleave'];\n  if (target.classList.contains('drawing_tool-pen')) {\n    events.forEach((el) => canvas.addEventListener(el, penFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, eraserFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, strokeFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, paintBucketFunctionality));\n  } else if (target.classList.contains('drawing_tool-paint_bucket')) {\n    events.forEach((el) => canvas.addEventListener(el, paintBucketFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, penFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, eraserFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, strokeFunctionality));\n  } else if (target.classList.contains('drawing_tool-eraser')) {\n    events.forEach((el) => canvas.addEventListener(el, eraserFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, penFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, strokeFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, paintBucketFunctionality));\n  } else if (target.classList.contains('drawing_tool-stroke')) {\n    events.forEach((el) => canvas.addEventListener(el, strokeFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, penFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, eraserFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, paintBucketFunctionality));\n  } else if (target.classList.contains('drawing_tool-color_picker')) {\n    events.forEach((el) => canvas.removeEventListener(el, penFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, eraserFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, strokeFunctionality));\n    events.forEach((el) => canvas.removeEventListener(el, paintBucketFunctionality));\n  }\n}\n\nfunction toolsListeners(event) {\n  const { target } = event;\n  drawingToolsFun(target);\n}\n\ntools.forEach((el) => el.addEventListener('click', (event) => {\n  for (let i = 0; i < tools.length; i += 1) {\n    if (tools[i].classList.contains('active_tool')) {\n      tools[i].classList.remove('active_tool');\n    }\n  }\n  el.classList.add('active_tool');\n  toolsListeners(event);\n}));\n\nrevertColors.addEventListener('click', () => {\n  [primaryColor.value, secondaryColor.value] = [secondaryColor.value, primaryColor.value];\n});\n\nexport default drawingToolsFun;\n","import Pen from './pen';\n\n/* eslint-disable no-restricted-globals, max-len */\nexport default class Eraser extends Pen {\n  drawBrasenham(color) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const range = document.querySelector('.range_line');\n    this.canvasSize.chooseSize();\n    const activeSize = document.querySelector('.active_size');\n    const activeSizeValue = activeSize.getAttribute('value');\n    ctx.fillStyle = color;\n    if (!this.flag) return;\n    let x1 = this.lastX;\n    let y1 = this.lastY;\n    const field = (512 / range.data);\n    x1 = Math.floor(this.lastX / field);\n    y1 = Math.floor(this.lastY / field);\n    let x2 = event.offsetX;\n    let y2 = event.offsetY;\n    x2 = Math.floor(x2 / field);\n    y2 = Math.floor(y2 / field);\n\n    if (x1 === x2 && y1 === y2) {\n      ctx.clearRect(x1 * field, y1 * field, field * activeSizeValue, field * activeSizeValue);\n      return;\n    }\n    const deltaX = x2 - x1;\n    const deltaY = y2 - y1;\n    const sightX = (deltaX < 0) ? -1 : 1;\n    const sightY = (deltaY < 0) ? -1 : 1;\n\n    if (Math.abs(deltaY) < Math.abs(deltaX)) {\n      const b = y1 - (deltaY / deltaX) * x1;\n\n      while (x1 !== x2) {\n        ctx.clearRect(x1 * field, Math.round((deltaY / deltaX) * x1 + b) * field, field * activeSizeValue, field * activeSizeValue);\n        x1 += sightX;\n      }\n    } else if (Math.abs(deltaY) > Math.abs(deltaX)) {\n      const b = x1 - (deltaX / deltaY) * y1;\n      while (y1 !== y2) {\n        ctx.clearRect(Math.round((deltaX / deltaY) * y1 + b) * field, y1 * field, field * activeSizeValue, field * activeSizeValue);\n        y1 += sightY;\n      }\n    }\n    ctx.clearRect(x2 * field, y2 * field, field * activeSizeValue, field * activeSizeValue);\n  }\n}\n","import Frames from '../frame-list/frames';\n\n/* eslint-disable max-len, default-case */\nexport default class Stroke {\n  constructor() {\n    this.lastX = null;\n    this.lastY = null;\n    this.canvasEvent = false;\n    this.storedLines = [];\n    this.originalImage = null;\n    this.color = null;\n    this.framesFunctionality = new Frames();\n  }\n\n  handleEvent(event) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const range = document.querySelector('.range_line');\n    const primaryColor = document.querySelector('.color_select-primary');\n    const secondaryColor = document.querySelector('.color_select-secondary');\n    const activeSize = document.querySelector('.active_size');\n    const activeSizeValue = activeSize.getAttribute('value');\n\n    switch (event.type) {\n      case 'mousedown':\n        this.originalImage = ctx.getImageData(0, 0, 512, 512);\n        this.lastX = event.offsetX;\n        this.lastY = event.offsetY;\n        this.canvasEvent = true;\n        break;\n\n      case 'mousemove':\n        if (this.canvasEvent === true) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(this.originalImage, 0, 0);\n          ctx.fillStyle = this.color;\n          ctx.strokeStyle = 'transparent';\n          ctx.lineJoin = 'square';\n          ctx.lineCap = 'square';\n          let x1 = this.lastX;\n          let y1 = this.lastY;\n          const field = 512 / range.data;\n          x1 = Math.floor(this.lastX / field);\n          y1 = Math.floor(this.lastY / field);\n          let x2 = event.offsetX;\n          let y2 = event.offsetY;\n          x2 = Math.floor(x2 / field);\n          y2 = Math.floor(y2 / field);\n\n          if (x1 === x2 && y1 === y2) {\n            ctx.fillRect(x1 * field, y1 * field, field * activeSizeValue, field * activeSizeValue);\n            return;\n          }\n          const deltaX = x2 - x1;\n          const deltaY = y2 - y1;\n          const sightX = (deltaX < 0) ? -1 : 1;\n          const sightY = (deltaY < 0) ? -1 : 1;\n\n          if (Math.abs(deltaY) < Math.abs(deltaX)) {\n            const b = y1 - (deltaY / deltaX) * x1;\n\n            while (x1 !== x2) {\n              ctx.fillRect(x1 * field, Math.round((deltaY / deltaX) * x1 + b) * field, field * activeSizeValue, field * activeSizeValue);\n              x1 += sightX;\n            }\n          } else if (Math.abs(deltaY) > Math.abs(deltaX)) {\n            const b = x1 - (deltaX / deltaY) * y1;\n            while (y1 !== y2) {\n              ctx.fillRect(Math.round((deltaX / deltaY) * y1 + b) * field, y1 * field, field * activeSizeValue, field * activeSizeValue);\n              y1 += sightY;\n            }\n          }\n          ctx.fillRect(x2 * field, y2 * field, field * activeSizeValue, field * activeSizeValue);\n          ctx.beginPath();\n          ctx.moveTo(this.lastX, this.lastY);\n          ctx.lineTo(event.offsetX, event.offsetY);\n          ctx.stroke();\n        }\n        break;\n\n      case 'mouseup':\n        this.canvasEvent = false;\n        this.framesFunctionality.putCanvasDataOnFrame();\n        break;\n\n      case 'mouseout':\n        this.canvasEvent = false;\n        break;\n    }\n\n    switch (event.which) {\n      case 1:\n        this.color = primaryColor.value;\n        break;\n\n      case 3:\n        this.color = secondaryColor.value;\n        break;\n\n      default:\n        this.color = secondaryColor.value;\n        break;\n    }\n  }\n}\n","import Frames from '../frame-list/frames';\n\n/* eslint-disable class-methods-use-this,no-restricted-globals, no-unused-vars, no-undef */\nexport default class PaintBucket {\n  constructor() {\n    this.color = null;\n    this.clickedColor = null;\n    this.imageData = null;\n    this.framesFunctionality = new Frames();\n  }\n\n  hexToRgb(hexName) {\n    const hex = hexName.replace('#', '');\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n    return [r, g, b];\n  }\n\n  floodFill(color) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    this.imageData = ctx.getImageData(0, 0, 512, 512);\n    this.clickedColor = `rgba(${\n      this.imageData.data[event.offsetY * 4 * 512 + event.offsetX * 4]\n    },${this.imageData.data[event.offsetY * 4 * 512 + event.offsetX * 4 + 1]},${\n      this.imageData.data[event.offsetY * 4 * 512 + event.offsetX * 4 + 2]\n    },1)`;\n\n    this.clickedColorRGB = `rgb(${\n      this.imageData.data[event.offsetY * 4 * 512 + event.offsetX * 4]\n    },${this.imageData.data[event.offsetY * 4 * 512 + event.offsetX * 4 + 1]},${\n      this.imageData.data[event.offsetY * 4 * 512 + event.offsetX * 4 + 2]\n    })`;\n\n    const fac = new FastAverageColor();\n    const avgColor = fac.getColor(canvas);\n    const stack = [[event.offsetY, event.offsetX]];\n    const viewed = {};\n    let pixel;\n    let canvasColor;\n    let length = 1;\n    const arrRgb = this.hexToRgb(`${color}`);\n\n    if (this.clickedColor === 'rgba(0,0,0,1)' && this.clickedColorRGB === avgColor.rgb) {\n      ctx.fillStyle = color;\n      ctx.fillRect(0, 0, 512, 512);\n      this.imageData = ctx.getImageData(0, 0, 512, 512);\n    } else if (this.clickedColor === avgColor.rgba) {\n      ctx.fillStyle = color;\n      ctx.fillRect(0, 0, 512, 512);\n      this.imageData = ctx.getImageData(0, 0, 512, 512);\n    } else {\n      while (length > 0) {\n        pixel = stack.pop();\n        viewed.pixel = true;\n        length -= 1;\n        if (pixel[0] >= 0 && pixel[0] <= 512 && pixel[1] >= 0 && pixel[1] <= 512) {\n          canvasColor = `rgba(${this.imageData.data[pixel[0] * 4 * 512 + pixel[1] * 4]},${this.imageData.data[pixel[0] * 4 * 512 + pixel[1] * 4 + 1]},${this.imageData.data[pixel[0] * 4 * 512 + pixel[1] * 4 + 2]},1)`;\n          if (canvasColor === this.clickedColor) {\n            [\n              this.imageData.data[pixel[0] * 4 * 512 + pixel[1] * 4],\n              this.imageData.data[pixel[0] * 4 * 512 + pixel[1] * 4 + 1],\n              this.imageData.data[pixel[0] * 4 * 512 + pixel[1] * 4 + 2],\n            ] = [arrRgb[0], arrRgb[1], arrRgb[2]];\n\n            if (!viewed[[pixel[0] - 1, pixel[1]]]) {\n              stack.push([pixel[0] - 1, pixel[1]]);\n              length += 1;\n            }\n            if (!viewed[[pixel[0] - 1, pixel[1] - 1]]) {\n              stack.push([pixel[0] - 1, pixel[1] - 1]);\n              length += 1;\n            }\n            if (!viewed[[pixel[0] - 1, pixel[1] + 1]]) {\n              stack.push([pixel[0] - 1, pixel[1] + 1]);\n              length += 1;\n            }\n            if (!viewed[[pixel[0] + 1, pixel[1]]]) {\n              stack.push([pixel[0] + 1, pixel[1]]);\n              length += 1;\n            }\n          }\n        }\n      }\n    }\n    ctx.putImageData(this.imageData, 0, 0);\n  }\n\n  handleEvent(event) {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const primaryColor = document.querySelector('.color_select-primary');\n    const secondaryColor = document.querySelector('.color_select-secondary');\n    if (event.type === 'mousedown' && event.which === 1) {\n      this.floodFill(primaryColor.value);\n      this.framesFunctionality.putCanvasDataOnFrame();\n    } else if (event.type === 'mousedown' && event.which === 3) {\n      this.floodFill(secondaryColor.value);\n      this.framesFunctionality.putCanvasDataOnFrame();\n    }\n  }\n}\n","import Frames from './frames';\n\nconst framesFunctionality = new Frames();\nlet frames = Array.from(document.querySelectorAll('.frame'));\nconst addNewFrameButton = document.querySelector('.add_new_frame');\n\ndocument.body.addEventListener('DOMSubtreeModified', () => {\n  frames = Array.from(document.querySelectorAll('.frame'));\n  frames.forEach((el, i) => {\n    const element = el;\n    element.children[1].textContent = i + 1;\n    element.children[2].addEventListener('click', framesFunctionality.deleteFrame);\n    element.children[4].addEventListener('click', framesFunctionality.duplicateFrame);\n    const events = ['mousemove', 'mousedown', 'mouseover', 'mouseout', 'dragstart', 'dragend', 'dragover', 'dragenter', 'dragleave', 'drop', 'mousewheel', 'scroll'];\n    events.forEach((ev) => element.addEventListener(ev, framesFunctionality));\n  });\n  frames.forEach((el) => el.addEventListener('click', () => {\n    for (let i = 0; i < frames.length; i += 1) {\n      if (frames[i].classList.contains('frame-active')) {\n        frames[i].classList.remove('frame-active');\n      }\n    }\n    el.classList.add('frame-active');\n    framesFunctionality.putFrameDataOnCanvas();\n  }));\n});\n\naddNewFrameButton.addEventListener('click', () => {\n  framesFunctionality.addFrame();\n});\n","import Authorize from './authorization';\n\nconst signInButton = document.querySelector('.sign_in-btn');\nconst autorize = new Authorize();\nsignInButton.addEventListener('click', () => {\n  autorize.googleSignIn();\n});\n","/* eslint-disable class-methods-use-this, no-undef */\nexport default class Authorize {\n  googleSignIn() {\n    const signInButton = document.querySelector('.sign_in-btn');\n\n    function app(user) {\n      const arr = user.displayName.split(' ');\n      signInButton.textContent = `Hello, ${arr[0]}`;\n      signInButton.style.width = 'fit-content';\n    }\n\n    function newLoginHappened(user) {\n      if (user) {\n        app(user);\n      } else {\n        const provider = new firebase.auth.GoogleAuthProvider();\n        firebase.auth().signInWithRedirect(provider);\n      }\n    }\n    firebase.auth().onAuthStateChanged(newLoginHappened);\n  }\n}\n","/* eslint-disable default-case */\nimport drawingToolsFun from '../tools/tools_functionality';\nimport Frames from '../frame-list/frames';\n\nconst filter = document.querySelector('.filter');\nconst modalWindow = document.querySelector('.modal_window');\nconst modalWindowExit = document.querySelector('.modal_window__header-exit');\nconst modalWindowDisplay = document.querySelector('.keyboard_controls');\nlet modalWindowItems = Array.from(document.querySelectorAll('.item-key'));\nlet modalWindowItemsHTML = modalWindowItems.map((el) => el.textContent).join('');\nconst penSizes = Array.from(document.querySelector('.pen_size').children);\nconst tools = Array.from(document.querySelector('.drawing_tool').children);\nconst pen = document.querySelector('.drawing_tool-pen');\nconst paintBucket = document.querySelector('.drawing_tool-paint_bucket');\nconst eraser = document.querySelector('.drawing_tool-eraser');\nconst stroke = document.querySelector('.drawing_tool-stroke');\nconst revertColors = document.querySelector('.revert_colors');\nconst keySimbolsString = 'QWERTYUIOP[]ASDFGHJKLZXCVBNM←↑↓→';\nconst keyCodesArray = ['KeyQ', 'KeyW', 'KeyE', 'KeyR', 'KeyT', 'KeyY', 'KeyU', 'KeyI', 'KeyO', 'KeyP', 'BracketLeft', 'BracketRight', 'KeyA', 'KeyS', 'KeyD',\n  'KeyF', 'KeyG', 'KeyH', 'KeyJ', 'KeyK', 'KeyL', 'KeyZ', 'KeyX', 'KeyC', 'KeyV', 'KeyB', 'KeyN', 'KeyM', 'ArrowLeft', 'ArrowUp', 'ArrowDown', 'ArrowRight'];\n\nfunction showWindow(state) {\n  filter.style.display = state;\n  modalWindow.style.display = state;\n}\n\nfunction changeShortcut(event) {\n  const { target } = event;\n  target.classList.add('key_change');\n  window.addEventListener('keydown', (ev) => {\n    const keyCode = ev.code;\n    if (keyCodesArray.indexOf(keyCode) === -1) return;\n    const simbolIndex = keyCodesArray.indexOf(keyCode);\n    const simbolKey = keySimbolsString[simbolIndex];\n    modalWindowItems = Array.from(document.querySelectorAll('.item-key'));\n    modalWindowItemsHTML = modalWindowItems.map((el) => el.textContent).join('');\n    if (modalWindowItemsHTML.indexOf(simbolKey) >= 0) {\n      const index = modalWindowItemsHTML.indexOf(simbolKey);\n      modalWindowItems[index].classList.add('key_warn');\n      modalWindowItems[index].textContent = '???';\n    }\n    target.textContent = `${keySimbolsString[keyCodesArray.indexOf(keyCode)]}`;\n    modalWindowItemsHTML = modalWindowItems.map((el) => el.textContent).join('');\n    target.classList.remove('key_change');\n    target.classList.remove('key_warn');\n  }, { once: true });\n}\n\nmodalWindowItems.forEach((el) => el.addEventListener('click', changeShortcut));\nmodalWindowDisplay.addEventListener('click', () => showWindow('block'));\nmodalWindowExit.addEventListener('click', () => showWindow('none'));\nfilter.addEventListener('click', () => showWindow('none'));\n\ndocument.addEventListener('keydown', (event) => {\n  const frames = Array.from(document.querySelectorAll('.frame'));\n  const activeFrame = document.querySelector('.frame-active');\n  const clickEvent = new Event('click');\n\n  if (modalWindow.style.display === 'none') {\n    switch (event.code) {\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[0].textContent)]}`:\n        for (let i = 0; i < tools.length; i += 1) {\n          if (tools[i].classList.contains('active_tool')) {\n            tools[i].classList.remove('active_tool');\n          }\n        }\n        pen.classList.add('active_tool');\n        drawingToolsFun(pen);\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[1].textContent)]}`:\n        for (let i = 0; i < tools.length; i += 1) {\n          if (tools[i].classList.contains('active_tool')) {\n            tools[i].classList.remove('active_tool');\n          }\n        }\n        paintBucket.classList.add('active_tool');\n        drawingToolsFun(paintBucket);\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[2].textContent)]}`:\n        for (let i = 0; i < tools.length; i += 1) {\n          if (tools[i].classList.contains('active_tool')) {\n            tools[i].classList.remove('active_tool');\n          }\n        }\n        eraser.classList.add('active_tool');\n        drawingToolsFun(eraser);\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[3].textContent)]}`:\n        for (let i = 0; i < tools.length; i += 1) {\n          if (tools[i].classList.contains('active_tool')) {\n            tools[i].classList.remove('active_tool');\n          }\n        }\n        stroke.classList.add('active_tool');\n        drawingToolsFun(stroke);\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[4].textContent)]}`:\n        for (let i = 0; i < penSizes.length; i += 1) {\n          if (penSizes[3].classList.contains('active_size')) {\n            return;\n          }\n          if (penSizes[i].classList.contains('active_size')) {\n            penSizes[i].classList.remove('active_size');\n            penSizes[i].children[0].classList.remove('active_inner');\n            penSizes[i + 1].classList.add('active_size');\n            penSizes[i + 1].children[0].classList.add('active_inner');\n            return;\n          }\n        }\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[5].textContent)]}`:\n        for (let i = 0; i < penSizes.length; i += 1) {\n          if (penSizes[0].classList.contains('active_size')) {\n            return;\n          }\n          if (penSizes[i].classList.contains('active_size')) {\n            penSizes[i].classList.remove('active_size');\n            penSizes[i].children[0].classList.remove('active_inner');\n            penSizes[i - 1].classList.add('active_size');\n            penSizes[i - 1].children[0].classList.add('active_inner');\n            return;\n          }\n        }\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[6].textContent)]}`:\n        for (let i = 0; i < frames.length; i += 1) {\n          if (frames[0].classList.contains('frame-active')) {\n            return;\n          }\n          if (frames[i].classList.contains('frame-active')) {\n            frames[i].classList.remove('frame-active');\n            frames[i - 1].classList.add('frame-active');\n            Frames.prototype.putFrameDataOnCanvas();\n            return;\n          }\n        }\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[7].textContent)]}`:\n        for (let i = 0; i < frames.length; i += 1) {\n          if (frames[frames.length - 1].classList.contains('frame-active')) {\n            return;\n          }\n          if (frames[i].classList.contains('frame-active')) {\n            frames[i].classList.remove('frame-active');\n            frames[i + 1].classList.add('frame-active');\n            Frames.prototype.putFrameDataOnCanvas();\n            return;\n          }\n        }\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[8].textContent)]}`:\n        Frames.prototype.addFrame();\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[9].textContent)]}`:\n        if (frames.length === 1) return;\n        activeFrame.dispatchEvent(clickEvent);\n        Frames.prototype.deleteFrame(clickEvent);\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[10].textContent)]}`:\n        activeFrame.dispatchEvent(clickEvent);\n        Frames.prototype.duplicateFrame(clickEvent);\n        break;\n\n      case `${keyCodesArray[keySimbolsString.indexOf(modalWindowItems[11].textContent)]}`:\n        revertColors.dispatchEvent(clickEvent);\n        break;\n    }\n  }\n});\n","import LocalStorageSetData from './local_storage_set';\nimport LocalStorageGetData from './local_storage_get';\nimport Frames from '../frame-list/frames';\nimport drawingToolsFun from '../tools/tools_functionality';\n\nconst localStorageSet = new LocalStorageSetData();\nconst localStorageGet = new LocalStorageGetData();\nconst framesFunctionality = new Frames();\n\nwindow.addEventListener('beforeunload', () => {\n  localStorageSet.savePenUnit();\n  localStorageSet.saveActiveTool();\n  localStorageSet.savePrimaryColor();\n  localStorageSet.saveSecondaryColor();\n  localStorageSet.saveFramesLength();\n  localStorageSet.saveActiveFrame();\n  localStorageSet.saveCanvasData();\n  localStorageSet.saveCanvasSize();\n  localStorageSet.saveAnimationSpeed();\n  localStorageSet.saveKeyboardShorts();\n});\n\nwindow.addEventListener('load', () => {\n  localStorageGet.getPenUnit();\n  localStorageGet.getActiveTool();\n  localStorageGet.getPrimaryColor();\n  localStorageGet.getSecondaryColor();\n  localStorageGet.getFramesLength();\n  localStorageGet.getActiveFrame();\n  localStorageGet.getCanvasData();\n  localStorageGet.getCanvasSize();\n  localStorageGet.getAnimationSpeed();\n  localStorageGet.getKeyboardShorts();\n  const activeTool = document.querySelector('.active_tool');\n  drawingToolsFun(activeTool);\n  framesFunctionality.putFrameDataOnCanvas();\n});\n","export default class LocalStorageSetData {\n  /* eslint-disable class-methods-use-this, no-unused-vars */\n  savePenUnit() {\n    const penSizes = Array.from(document.querySelector('.pen_size').children);\n    penSizes.forEach((el, i) => {\n      if (el.classList.contains('active_size')) {\n        localStorage.setItem('active_size-index', `${i}`);\n      }\n    });\n  }\n\n  saveActiveTool() {\n    const tools = Array.from(document.querySelector('.drawing_tool').children);\n    tools.forEach((el, i) => {\n      if (el.classList.contains('active_tool')) {\n        localStorage.setItem('active_tool-index', `${i}`);\n      }\n    });\n  }\n\n  savePrimaryColor() {\n    const primaryColor = document.querySelector('.color_select-primary');\n    localStorage.setItem('primary_color-value', `${primaryColor.value}`);\n  }\n\n  saveSecondaryColor() {\n    const secondaryColor = document.querySelector('.color_select-secondary');\n    localStorage.setItem('secondary_color-value', `${secondaryColor.value}`);\n  }\n\n  saveFramesLength() {\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    localStorage.setItem('frames_length', `${frames.length}`);\n  }\n\n  saveActiveFrame() {\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    frames.forEach((el, i) => {\n      if (el.classList.contains('frame-active')) {\n        localStorage.setItem('active_frame-index', `${i}`);\n      }\n    });\n  }\n\n  saveCanvasData() {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    frames.forEach((el, i) => {\n      localStorage.setItem(`canvas_frame${i + 1}`, el.children[0].toDataURL());\n    });\n    localStorage.setItem('canvas_image', canvas.toDataURL());\n  }\n\n  saveCanvasSize() {\n    const range = document.querySelector('.range_line');\n    localStorage.setItem('range_value', `${range.value}`);\n    localStorage.setItem('canvas_size', `${range.data}`);\n  }\n\n  saveAnimationSpeed() {\n    const animationSpeed = document.querySelector('.animation_speed');\n    localStorage.setItem('animation_speed', `${animationSpeed.value}`);\n  }\n\n  saveKeyboardShorts() {\n    const modalWindowItems = Array.from(document.querySelectorAll('.item-key'));\n    const modalWindowItemsHTML = modalWindowItems.map((el) => el.textContent);\n    localStorage.setItem('keyboarb_shortcuts', JSON.stringify(modalWindowItemsHTML));\n  }\n}\n","export default class LocalStorageGetData {\n  /* eslint-disable class-methods-use-this */\n  getActiveTool() {\n    const tools = Array.from(document.querySelector('.drawing_tool').children);\n    if (localStorage.getItem('active_tool-index') !== null) {\n      const activeToolIndex = localStorage.getItem('active_tool-index');\n      tools[activeToolIndex].classList.add('active_tool');\n    } else {\n      tools[0].classList.add('active_tool');\n    }\n  }\n\n  getPenUnit() {\n    const penSizes = Array.from(document.querySelector('.pen_size').children);\n    if (localStorage.getItem('active_size-index') !== null) {\n      const activeSizeIndex = localStorage.getItem('active_size-index');\n      penSizes[activeSizeIndex].classList.add('active_size');\n      penSizes[activeSizeIndex].children[0].classList.add('active_inner');\n    } else {\n      penSizes[0].classList.add('active_size');\n      penSizes[0].children[0].classList.add('active_inner');\n    }\n  }\n\n  getPrimaryColor() {\n    const primaryColor = document.querySelector('.color_select-primary');\n    if (localStorage.getItem('primary_color-value') !== null) {\n      primaryColor.value = localStorage.getItem('primary_color-value');\n    } else {\n      primaryColor.value = '#000000';\n    }\n  }\n\n  getSecondaryColor() {\n    const secondaryColor = document.querySelector('.color_select-secondary');\n    if (localStorage.getItem('secondary_color-value') !== null) {\n      secondaryColor.value = localStorage.getItem('secondary_color-value');\n    } else {\n      secondaryColor.value = '#ffffff';\n    }\n  }\n\n  getFramesLength() {\n    const framesContainer = document.querySelector('.frames_container');\n    if (localStorage.getItem('frames_length') !== null) {\n      const framesLength = Number(localStorage.getItem('frames_length'));\n      const frameStructure = `<div class=\"frame draggable\" draggable=\"true\">\n                              <canvas class=\"canvas_frame\" width=\"96\" height=\"96\"></canvas>\n                              <button class=\"button-frame_number\"></button>\n                              <button class=\"button-frame_delete\" tooltip='delete'></button>\n                              <button class=\"button-frame_move\"></button>\n                              <button class=\"button-frame_duplicate\"></button>\n                            </div>`;\n\n      for (let i = 0; i < framesLength - 1; i += 1) {\n        framesContainer.insertAdjacentHTML('beforeend', frameStructure);\n      }\n    }\n  }\n\n  getActiveFrame() {\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    if (localStorage.getItem('active_frame-index') !== null) {\n      const activeFrameInd = localStorage.getItem('active_frame-index');\n      frames[activeFrameInd].classList.add('frame-active');\n    } else {\n      frames[0].classList.add('frame-active');\n    }\n  }\n\n  getCanvasData() {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    frames.forEach((el, i) => {\n      if (localStorage.getItem(`canvas_frame${i + 1}`) !== null) {\n        const canvasFrame = el.children[0];\n        const ctxFrame = canvasFrame.getContext('2d');\n        const canvasFrameImg = localStorage.getItem(`canvas_frame${i + 1}`);\n        const img = new Image();\n        img.src = canvasFrameImg;\n        img.onload = () => ctxFrame.drawImage(img, 0, 0);\n      }\n    });\n\n    if (localStorage.getItem('canvas_image') !== null) {\n      const canvasImg = localStorage.getItem('canvas_image');\n      const img = new Image();\n      img.src = canvasImg;\n      img.onload = () => ctx.drawImage(img, 0, 0);\n    }\n  }\n\n  getCanvasSize() {\n    const range = document.querySelector('.range_line');\n    const canvasSizeWidth = document.querySelector('.canvas_width__value');\n    const canvasSizeHeight = document.querySelector('.canvas_height__value');\n\n    if (localStorage.getItem('range_value') !== null) {\n      range.value = localStorage.getItem('range_value');\n    } else {\n      range.value = '2';\n    }\n\n    if (localStorage.getItem('canvas_size') !== null) {\n      range.data = localStorage.getItem('canvas_size');\n      canvasSizeWidth.value = `${range.data}`;\n      canvasSizeHeight.value = `${range.data}`;\n    } else {\n      range.data = '64';\n      canvasSizeWidth.value = `${range.data}`;\n      canvasSizeHeight.value = `${range.data}`;\n    }\n  }\n\n  getAnimationSpeed() {\n    const animationSpeed = document.querySelector('.animation_speed');\n    const animationSpeedOutput = document.querySelector('.fps_output');\n\n    if (localStorage.getItem('animation_speed') !== null) {\n      animationSpeed.value = localStorage.getItem('animation_speed');\n      animationSpeedOutput.textContent = `${animationSpeed.value} FPS`;\n    } else {\n      animationSpeed.value = '1';\n      animationSpeedOutput.textContent = `${animationSpeed.value} FPS`;\n    }\n  }\n\n  getKeyboardShorts() {\n    const modalWindowItems = Array.from(document.querySelectorAll('.item-key'));\n    if (localStorage.getItem('keyboarb_shortcuts') !== null) {\n      const modalWindowItemsHTML = JSON.parse(localStorage.getItem('keyboarb_shortcuts'));\n      modalWindowItems.forEach((el, i) => {\n        const item = el;\n        item.textContent = modalWindowItemsHTML[i];\n      });\n    } else {\n      const modalWindowItemsHTML = 'PBES][↑↓FDNX';\n      modalWindowItems.forEach((el, i) => {\n        const item = el;\n        item.textContent = modalWindowItemsHTML[i];\n      });\n    }\n  }\n}\n","import GIFexport from './GIFexport';\nimport PNGexport from './PNGexport';\n\nconst pngExport = new PNGexport();\nconst gifExport = new GIFexport();\n\nlet frames = Array.from(document.querySelectorAll('.frame'));\nconst resolutionInputs = Array.from(document.querySelectorAll('.resolution_value'));\nconst resolutionBoxLeft = document.querySelector('.box_input-left');\nconst downloadGIF = document.querySelector('.download_gif-btn');\nconst singleFramePNG = document.querySelector('.PNG_frame-btn');\nconst scaleOutput = document.querySelector('.scale_output');\nconst spritesheetCols = document.querySelector('.spitesheet_cols');\nconst spritesheetRows = document.querySelector('.spitesheet_rows');\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  scaleOutput.textContent = `${(resolutionBoxLeft.value / 32).toFixed(1)}x`;\n  pngExport.spritesheetFileInfo();\n});\n\nresolutionInputs.forEach((el) => el.addEventListener('input', () => {\n  for (let i = 0; i < resolutionInputs.length; i += 1) {\n    resolutionInputs[i].value = el.value;\n  }\n  scaleOutput.textContent = `${(el.value / 32).toFixed(1)}x`;\n  pngExport.spritesheetFileInfo();\n}));\n\nspritesheetCols.addEventListener('input', () => {\n  frames = Array.from(document.querySelectorAll('.frame'));\n  spritesheetCols.max = `${frames.length}`;\n  if (spritesheetCols.value > spritesheetCols.max) {\n    spritesheetCols.value = spritesheetCols.max;\n  }\n  spritesheetRows.value = Math.ceil(frames.length / spritesheetCols.value);\n  pngExport.spritesheetFileInfo();\n});\n\nsingleFramePNG.addEventListener('click', pngExport.singleFrameToPNG);\n\ndownloadGIF.addEventListener('click', gifExport.downloadGif);\n","/* eslint-disable class-methods-use-this, no-unused-vars */\nexport default class PNGexport {\n  spritesheetFileInfo() {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    const resolutionBoxLeft = document.querySelector('.box_input-left');\n    const spritesheetCols = document.querySelector('.spitesheet_cols');\n    const spritesheetRows = document.querySelector('.spitesheet_rows');\n    const spritesheetOutputFrames = document.querySelector('.spritesheet_output-frames');\n    const spritesheetOutputColRow = document.querySelector('.spritesheet_output-colrow');\n\n    if (frames.length === 1) {\n      spritesheetOutputFrames.textContent = `${resolutionBoxLeft.value * spritesheetCols.value} x ${resolutionBoxLeft.value * spritesheetRows.value} px, ${frames.length} frame`;\n    } else {\n      spritesheetOutputFrames.textContent = `${resolutionBoxLeft.value * spritesheetCols.value} x ${resolutionBoxLeft.value * spritesheetRows.value} px, ${frames.length} frames`;\n    }\n    if (spritesheetCols.value === '1' && spritesheetRows.value === '1') {\n      spritesheetOutputColRow.textContent = `${spritesheetCols.value} column, ${spritesheetRows.value} row.`;\n    } else if (spritesheetCols.value === '1' && spritesheetRows.value !== '1') {\n      spritesheetOutputColRow.textContent = `${spritesheetCols.value} column, ${spritesheetRows.value} rows.`;\n    } else if (spritesheetCols.value !== '1' && spritesheetRows.value === '1') {\n      spritesheetOutputColRow.textContent = `${spritesheetCols.value} columns, ${spritesheetRows.value} row.`;\n    }\n  }\n\n  singleFrameToPNG() {\n    const canvas = document.querySelector('.canvas');\n    const ctx = canvas.getContext('2d');\n    const a = document.createElement('a');\n    a.href = canvas.toDataURL();\n    a.download = 'canvas-image.png';\n    a.click();\n  }\n}\n","/* eslint-disable no-undef */\nexport default class GIFexport {\n  constructor() {\n    this.gifRepeat = null;\n  }\n\n  downloadGif() {\n    const animationSpeed = document.querySelector('.animation_speed');\n    const loop = document.querySelector('.loop_repeatedly');\n    const gifSpeed = 1000 / Number(animationSpeed.value);\n\n    if (loop.checked === true) {\n      this.gifRepeat = 0;\n    } else {\n      this.gifRepeat = 1;\n    }\n    const encoder = new GIFEncoder();\n    const params = $.extend({\n      frames: $('.canvas_frame').map((i, f) => f.getContext('2d')).toArray(),\n      filename: 'piskelclone.gif',\n      repeat: this.gifRepeat,\n      delay: gifSpeed,\n      dispose: 0,\n      transparent: null,\n    });\n    encoder.setRepeat(params.repeat);\n    encoder.setDelay(params.delay);\n    encoder.setDispose(params.dispose);\n    encoder.setTransparent(params.transparent);\n    encoder.start();\n    params.frames.forEach((frame) => encoder.addFrame(frame));\n    encoder.finish();\n    encoder.download(params.filename);\n  }\n}\n","import AnimationPreview from './animation_preview';\n\nconst animation = new AnimationPreview();\nconst popupPreview = document.querySelector('.popup_preview-btn');\nconst animationSpeed = document.querySelector('.animation_speed');\nconst animationSpeedText = document.querySelector('.fps_output');\nconst rightSectionTools = document.querySelector('.right_section-tools');\nconst animatedCanvas = document.querySelector('.canvas_animation_preview');\nconst animatedCtx = animatedCanvas.getContext('2d');\nconst animationButtonsContainer = document.querySelector('.canvas_animation_buttons');\n\n\nanimation.start();\n\npopupPreview.addEventListener('click', animation.fullScreenMode);\n\nanimationSpeed.addEventListener('change', () => {\n  animationSpeedText.textContent = `${animationSpeed.value} FPS`;\n});\n\nrightSectionTools.addEventListener('mouseover', () => {\n  animationButtonsContainer.style.visibility = 'visible';\n});\n\nrightSectionTools.addEventListener('mouseout', () => {\n  animationButtonsContainer.style.visibility = 'hidden';\n});\n\nanimationSpeedText.textContent = `${animationSpeed.value} FPS`;","export default class AnimationPreview {\n  constructor() {\n    this.frameIndex = 0;\n  }\n\n  update() {\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    if (this.frameIndex < frames.length - 1) {\n      this.frameIndex += 1;\n    } else {\n      this.frameIndex = 0;\n    }\n  }\n\n  render() {\n    const frames = Array.from(document.querySelectorAll('.frame'));\n    const animatedCanvas = document.querySelector('.canvas_animation_preview');\n    const animatedCtx = animatedCanvas.getContext('2d');\n    animatedCtx.clearRect(0, 0, animatedCanvas.width, animatedCanvas.height);\n    const frameImg = frames[this.frameIndex].children[0];\n    // eslint-disable-next-line max-len\n    animatedCtx.drawImage(frameImg, 0, 0, frameImg.width, frameImg.height, 0, 0, animatedCanvas.width, animatedCanvas.height);\n  }\n\n  start() {\n    const animatedCanvas = document.querySelector('.canvas_animation_preview');\n    const animatedCtx = animatedCanvas.getContext('2d');\n    const animationSpeed = document.querySelector('.animation_speed');\n\n    const noSpeed = () => {\n      const activeFrame = document.querySelector('.frame-active');\n      const frameImg = activeFrame.children[0];\n      animatedCtx.imageSmoothingEnabled = false;\n      animatedCtx.clearRect(0, 0, animatedCanvas.width, animatedCanvas.height);\n      // eslint-disable-next-line max-len\n      animatedCtx.drawImage(frameImg, 0, 0, frameImg.width, frameImg.height, 0, 0, animatedCanvas.width, animatedCanvas.height);\n    };\n\n    const loop = () => setTimeout(() => {\n      const frames = Array.from(document.querySelectorAll('.frame'));\n      if (this.frameIndex < frames.length - 1) {\n        this.frameIndex += 1;\n      } else {\n        this.frameIndex = 0;\n      }\n      animatedCtx.clearRect(0, 0, animatedCanvas.width, animatedCanvas.height);\n      const frameImg = frames[this.frameIndex].children[0];\n      animatedCtx.imageSmoothingEnabled = false;\n      // eslint-disable-next-line max-len\n      animatedCtx.drawImage(frameImg, 0, 0, frameImg.width, frameImg.height, 0, 0, animatedCanvas.width, animatedCanvas.height);\n      window.requestAnimationFrame(loop);\n    }, (1000 / animationSpeed.value) === Infinity ? noSpeed() : (1000 / animationSpeed.value));\n\n    window.requestAnimationFrame(loop);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  handleEvent(event) {\n    const target = event.target.closest('div');\n    switch (event.type) {\n      case 'mouseover':\n        target.children[0].style.visibility = 'visible';\n        break;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  fullScreenMode() {\n    const animatedCanvas = document.querySelector('.canvas_animation_preview');\n    const animatedCtx = animatedCanvas.getContext('2d');\n    if (document.fullscreenEnabled || document.webkitFullscreenEnabled) {\n      if ('requestFullscreen' in animatedCanvas) {\n        animatedCanvas.requestFullscreen();\n      } else if ('webkitRequestFullscreen' in animatedCanvas) {\n        animatedCanvas.webkitRequestFullscreen();\n      }\n    }\n  }\n}\n"],"sourceRoot":""}